<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Capítulo 6 Datos estructurados: matrices y tablas | Aprendiendo R sin morir en el intento</title>
<meta name="author" content="Javier Álvarez Liébana">
<meta name="description" content="Acceso a las funciones de los paquetes A veces puede que no queramos cargar todo un paquete sino solo una función del mismo, para lo que es suficiente nombre_paquete::nombre_funcion. Sabemos un...">
<meta name="generator" content="bookdown 0.23 with bs4_book()">
<meta property="og:title" content="Capítulo 6 Datos estructurados: matrices y tablas | Aprendiendo R sin morir en el intento">
<meta property="og:type" content="book">
<meta property="og:image" content="/img/logo_R.png">
<meta property="og:description" content="Acceso a las funciones de los paquetes A veces puede que no queramos cargar todo un paquete sino solo una función del mismo, para lo que es suficiente nombre_paquete::nombre_funcion. Sabemos un...">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Capítulo 6 Datos estructurados: matrices y tablas | Aprendiendo R sin morir en el intento">
<meta name="twitter:description" content="Acceso a las funciones de los paquetes A veces puede que no queramos cargar todo un paquete sino solo una función del mismo, para lo que es suficiente nombre_paquete::nombre_funcion. Sabemos un...">
<meta name="twitter:image" content="/img/logo_R.png">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><link href="libs/_Sen-0.4.0/font.css" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=DM%20Mono&amp;display=swap" rel="stylesheet">
<link href="libs/_Bitter-0.4.0/font.css" rel="stylesheet">
<script src="libs/bs3compat-0.2.5.1/tabs.js"></script><script src="libs/bs3compat-0.2.5.1/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- CSS -->
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">Aprendiendo R sin morir en el intento</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html">Prefacio</a></li>
<li class="book-part">Toma de contacto</li>
<li><a class="" href="instalacionR.html"><span class="header-section-number">1</span> Instalación</a></li>
<li><a class="" href="primeros-pasos.html"><span class="header-section-number">2</span> Primeros pasos</a></li>
<li class="book-part">Conceptos básicos</li>
<li><a class="" href="tipos-de-datos-i-vectores.html"><span class="header-section-number">3</span> Tipos de datos I: vectores</a></li>
<li><a class="" href="flujo-de-trabajo-proyecto.html"><span class="header-section-number">4</span> Flujo de trabajo: proyecto</a></li>
<li><a class="" href="control.html"><span class="header-section-number">5</span> Estructuras de control</a></li>
<li><a class="active" href="datos.html"><span class="header-section-number">6</span> Datos estructurados: matrices y tablas</a></li>
<li><a class="" href="importar_exportar.html"><span class="header-section-number">7</span> Importando/exportando</a></li>
<li class="book-part">Listas y funciones</li>
<li><a class="" href="otros_datos.html"><span class="header-section-number">8</span> Listas y factores</a></li>
<li><a class="" href="FUNCIONES.html"><span class="header-section-number">9</span> Creación de funciones</a></li>
<li><a class="" href="qu%C3%A9-sabemos-hacer.html"><span class="header-section-number">10</span> ¿Qué sabemos hacer?</a></li>
</ul>

        <div class="book-extra">
          <p><a id="book-repo" href="https://github.com/dadosdelaplace/cursoR_intro_2021_2022">View book source <i class="fab fa-github"></i></a></p>
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="datos" class="section level1">
<h1>
<span class="header-section-number">Capítulo 6</span> Datos estructurados: matrices y tablas<a class="anchor" aria-label="anchor" href="#datos"><i class="fas fa-link"></i></a>
</h1>
<div class="rmdimportant">
<p><strong><span style="color: #20935E;">Acceso a las funciones de los paquetes</span></strong></p>
<p>A veces puede que no queramos cargar todo un paquete sino solo una función del mismo, para lo que es suficiente <code>nombre_paquete::nombre_funcion</code>.</p>
</div>
<p>Sabemos un poco de la gramática y ortografía de nuestro lenguaje, y sabemos las funcionalidades básicas de nuestro Word. Vamos a encontrar la mejor trama para la novela: <strong>hablemos de estructuras de datos</strong>.</p>
<div id="matrices" class="section level2">
<h2>
<span class="header-section-number">6.1</span> Matrices<a class="anchor" aria-label="anchor" href="#matrices"><i class="fas fa-link"></i></a>
</h2>
<p>Hasta ahora <strong>hemos visto solo datos en una dimensión</strong>: una variable, que tiene n valores numéricos, n valores lógicos o n valores de tipo texto. <strong>Una sola variable</strong> (de n elementos).</p>
<p>Pero cuando analizamos datos solemos tener varias variables distintas. Cuando tenemos <strong>distintas variables numéricas de igual longitud</strong>, un formato de dato muy habitual de trabajar es lo que conocemos como <strong>matrices</strong>: una «tabla» de números, con filas y columnas.</p>
<p>Vamos a definir las <strong>edades, teléfonos y códigos postales de una serie de individuos</strong>.</p>
<div class="sourceCode" id="cb302"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">edades</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">14</span>, <span class="fl">24</span>, <span class="fl">56</span>, <span class="fl">31</span>, <span class="fl">20</span>, <span class="fl">87</span>, <span class="fl">73</span><span class="op">)</span> <span class="co"># vector numérico de longitud 7</span>
<span class="va">tlf</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="cn">NA</span>, <span class="fl">683839390</span>, <span class="fl">621539732</span>, <span class="fl">618211286</span>, <span class="cn">NA</span>, <span class="fl">914727164</span>, <span class="cn">NA</span><span class="op">)</span>
<span class="va">cp</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">33007</span>, <span class="fl">28019</span>, <span class="fl">37005</span>, <span class="fl">18003</span>, <span class="fl">33091</span>, <span class="fl">25073</span>, <span class="fl">17140</span><span class="op">)</span></code></pre></div>
<p>Hasta ahora, cada variable la hemos definido por separado, pero ahora vamos a juntarlas: vamos a crear nuestro <strong>primer conjunto de datos</strong> juntado todas ellas en una matriz, un conjunto de números organizado en <strong>3 columnas (una por variable)</strong> y <strong>7 filas o registros (una por persona)</strong>. Para ello usaremos la función <code><a href="https://rdrr.io/r/base/cbind.html">cbind()</a></code>, que nos concatena vectores de igual longitud en formato columna.</p>
<div class="sourceCode" id="cb303"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html">cbind</a></span><span class="op">(</span><span class="va">edades</span>, <span class="va">tlf</span>, <span class="va">cp</span><span class="op">)</span> <span class="co"># Construimos la matriz por columnas</span>
<span class="va">x</span></code></pre></div>
<pre><code>##      edades       tlf    cp
## [1,]     14        NA 33007
## [2,]     24 683839390 28019
## [3,]     56 621539732 37005
## [4,]     31 618211286 18003
## [5,]     20        NA 33091
## [6,]     87 914727164 25073
## [7,]     73        NA 17140</code></pre>
<p>Lo que tenemos es una columna por variable y una fila por registro. También podemos construir la matriz por filas con el comando <code><a href="https://rdrr.io/r/base/cbind.html">rbind()</a></code> (aunque lo habitual es tener cada variable en una columna).</p>
<div class="sourceCode" id="cb305"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">y</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html">rbind</a></span><span class="op">(</span><span class="va">edades</span>, <span class="va">tlf</span>, <span class="va">cp</span><span class="op">)</span> <span class="co"># Construimos la matriz por filas</span>
<span class="va">y</span></code></pre></div>
<pre><code>##         [,1]      [,2]      [,3]      [,4]  [,5]      [,6]  [,7]
## edades    14        24        56        31    20        87    73
## tlf       NA 683839390 621539732 618211286    NA 914727164    NA
## cp     33007     28019     37005     18003 33091     25073 17140</code></pre>
<p>Como ves, ahora nuestros datos están <strong>tabulados</strong>, tienen dos dimensiones. ¿Cómo saber las <strong>dimensiones</strong> que tiene una matriz? Prueba a ejecutar la función <code><a href="https://rdrr.io/r/base/dim.html">dim()</a></code>.</p>
<div class="sourceCode" id="cb307"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/dim.html">dim</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] 7 3</code></pre>
<div class="sourceCode" id="cb309"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/dim.html">dim</a></span><span class="op">(</span><span class="va">y</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] 3 7</code></pre>
<p>Fíjate que <code><a href="https://rdrr.io/r/base/dim.html">dim()</a></code> devuelve un vector de 2 elementos, por lo que para acceder las filas deberemos ejecutar <code>dim(x)[1]</code> (y <code>dim(x)[2]</code> para las columnas).</p>
<div class="sourceCode" id="cb311"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/dim.html">dim</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span></code></pre></div>
<pre><code>## [1] 7</code></pre>
<div class="sourceCode" id="cb313"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/dim.html">dim</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span></code></pre></div>
<pre><code>## [1] 3</code></pre>
<div class="sourceCode" id="cb315"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/nrow.html">nrow</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] 7</code></pre>
<div class="sourceCode" id="cb317"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/nrow.html">ncol</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] 3</code></pre>
<p>También tenemos a nuestra disposición las funciones <code><a href="https://rdrr.io/r/base/nrow.html">nrow()</a></code> y <code><a href="https://rdrr.io/r/base/nrow.html">ncol()</a></code>, que nos devuelven directamente el número de filas y columnas.</p>
<div class="sourceCode" id="cb319"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/nrow.html">nrow</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] 7</code></pre>
<div class="sourceCode" id="cb321"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/nrow.html">ncol</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] 3</code></pre>
<p>Bien, ya sabemos definir una matriz a partir de variables. Igual que a veces es útil generar un vector de elementos repetidos, también podemos definir una <strong>matriz de números repetidos</strong> (por ejemplo, de ceros), con la función <code><a href="https://rdrr.io/r/base/matrix.html">matrix()</a></code>, indicándole el número de filas y columnas.</p>
<div class="sourceCode" id="cb323"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/matrix.html">matrix</a></span><span class="op">(</span><span class="fl">0</span>, nrow <span class="op">=</span> <span class="fl">5</span>, ncol <span class="op">=</span> <span class="fl">3</span><span class="op">)</span> <span class="co"># 5 filas, 3 columnas, todo 0's</span></code></pre></div>
<pre><code>##      [,1] [,2] [,3]
## [1,]    0    0    0
## [2,]    0    0    0
## [3,]    0    0    0
## [4,]    0    0    0
## [5,]    0    0    0</code></pre>
<p>También podemos definir una <strong>matriz a partir de un vector numérico</strong>, reorganizando los valores en forma de matriz (con una dimensión tal que <code>filas * columnas = longitud del vector</code>), sabiendo que los elementos se van colocando por columnas (primeros valores en la primera columna, de arriba a abajo).</p>
<div class="sourceCode" id="cb325"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">z</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html">matrix</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">15</span>, ncol <span class="op">=</span> <span class="fl">5</span><span class="op">)</span> <span class="co"># Matriz con el vector 1:5 con 5 columnas (ergo 3 filas)</span>
<span class="va">z</span></code></pre></div>
<pre><code>##      [,1] [,2] [,3] [,4] [,5]
## [1,]    1    4    7   10   13
## [2,]    2    5    8   11   14
## [3,]    3    6    9   12   15</code></pre>
<div class="sourceCode" id="cb327"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/class.html">class</a></span><span class="op">(</span><span class="va">z</span><span class="op">)</span> <span class="co"># Clase de la variable</span></code></pre></div>
<pre><code>## [1] "matrix"</code></pre>
<p> </p>
<p>Dada una matriz <code>x</code> podemos darle vuelta (lo que se conoce como <strong>matriz transpuesta</strong>, donde filas pasan a ser columnas y viceversa) con la función <code><a href="https://rdrr.io/r/base/t.html">t()</a></code>.</p>
<div class="sourceCode" id="cb329"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">x</span></code></pre></div>
<pre><code>##      edades       tlf    cp
## [1,]     14        NA 33007
## [2,]     24 683839390 28019
## [3,]     56 621539732 37005
## [4,]     31 618211286 18003
## [5,]     20        NA 33091
## [6,]     87 914727164 25073
## [7,]     73        NA 17140</code></pre>
<div class="sourceCode" id="cb331"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/t.html">t</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="co"># Matriz transpuesta</span></code></pre></div>
<pre><code>##         [,1]      [,2]      [,3]      [,4]  [,5]      [,6]  [,7]
## edades    14        24        56        31    20        87    73
## tlf       NA 683839390 621539732 618211286    NA 914727164    NA
## cp     33007     28019     37005     18003 33091     25073 17140</code></pre>
</div>
<div id="apply-vs-bucles" class="section level2">
<h2>
<span class="header-section-number">6.2</span> Apply vs bucles<a class="anchor" aria-label="anchor" href="#apply-vs-bucles"><i class="fas fa-link"></i></a>
</h2>
<p>Si has programado en algún otro lenguaje, estarás echando en falta elementos como un <code>if (blabla) {...} else {...}</code> (que los usaremos a veces) o bucles <code>for</code> y <code>while</code>. Si es la primera que programas en algún lenguaje, dichas estructuras te las encontrarás programes en lo que programes:</p>
<ul>
<li>
<code>if (condición) { código A } else { código B }</code>: si <code>condición</code> (por ejemplo, <code>x == 1</code>) es cierta, se ejecuta <code>código A</code>; si es falsa, se ejecuta <code>código B</code>.</li>
<li>
<code>for</code>: <strong>bucle</strong> que permite repetir el mismo código un número fijo de veces (normalmente en función de un índice).</li>
<li>
<code>while</code>: <strong>bucle</strong> que permite repetir el mismo código un número a priori indeterminado de veces (solo pararía cuando la condición del <code>while</code> no se cumpliese).</li>
</ul>
<p>Si eres un programador avezado te estarás preguntando: <strong>¿no existen los bucles en <code>R</code>?</strong> Sí, sí existen. He aquí un ejemplo: tras definir un vector de 0’s, para cada valor <code>i</code>, se guardará en el lugar i-ésimo el valor <code>i^2</code>.</p>
<div class="sourceCode" id="cb333"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">v</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">20</span><span class="op">)</span> <span class="co"># Vector de 20 ceros</span>
<span class="kw">for</span> <span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="fl">20</span><span class="op">)</span> <span class="op">{</span> <span class="co"># Bucle en base a un índice i que va de 1 a 20</span>

  <span class="va">v</span><span class="op">[</span><span class="va">i</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="va">i</span><span class="op">^</span><span class="fl">2</span> <span class="co"># En cada iteración guardamos el valor de i al cuadrado en el elemento i del vector v</span>
    
<span class="op">}</span>
<span class="va">v</span></code></pre></div>
<pre><code>##  [1]   1   4   9  16  25  36  49  64  81 100 121 144 169 196 225 256 289 324 361
## [20] 400</code></pre>
<p>La razón por la que no hemos usado aún <strong>bucles</strong>, e intentaremos evitarlos lo máximo posible, es porque en <code>R</code> son <strong>muy ineficientes</strong> en tiempo de ejecución. Vamos a poner un ejemplo. Supongamos que de la matriz <code>x</code> queremos calcular la suma de cada fila (es decir, 7 valores) o la suma de cada columna (3 valores). Con bucles sería así.</p>
<div class="sourceCode" id="cb335"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">x</span></code></pre></div>
<pre><code>##      edades       tlf    cp
## [1,]     14        NA 33007
## [2,]     24 683839390 28019
## [3,]     56 621539732 37005
## [4,]     31 618211286 18003
## [5,]     20        NA 33091
## [6,]     87 914727164 25073
## [7,]     73        NA 17140</code></pre>
<div class="sourceCode" id="cb337"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">suma_por_filas</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fu"><a href="https://rdrr.io/r/base/dim.html">dim</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span><span class="op">)</span> <span class="co"># dim(x)[1] número de filas</span>
<span class="va">suma_por_cols</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fu"><a href="https://rdrr.io/r/base/dim.html">dim</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span><span class="op">)</span> <span class="co"># dim(x)[2] número de columnas</span>
<span class="kw">for</span> <span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="fu"><a href="https://rdrr.io/r/base/dim.html">dim</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span><span class="op">)</span> <span class="op">{</span> <span class="co"># Bucle recorriendo filas</span>

  <span class="va">suma_por_filas</span><span class="op">[</span><span class="va">i</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">x</span><span class="op">[</span><span class="va">i</span>, <span class="op">]</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="co"># Suma de la fila i, eliminando NA</span>
    
<span class="op">}</span>
<span class="va">suma_por_filas</span></code></pre></div>
<pre><code>## [1]     33021 683867433 621576793 618229320     33111 914752324     17213</code></pre>
<div class="sourceCode" id="cb339"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw">for</span> <span class="op">(</span><span class="va">j</span> <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="fu"><a href="https://rdrr.io/r/base/dim.html">dim</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span><span class="op">)</span> <span class="op">{</span> <span class="co"># Bucle recorriendo filas</span>

  <span class="va">suma_por_cols</span><span class="op">[</span><span class="va">j</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">x</span><span class="op">[</span>, <span class="va">j</span><span class="op">]</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="co"># Suma de la columna j, eliminando NA</span>
    
<span class="op">}</span>
<span class="va">suma_por_cols</span></code></pre></div>
<pre><code>## [1]        305 2838317572     191338</code></pre>
<p>En el código anterior puedes ver como para <strong>acceder a la fila i-ésima de la matriz</strong> se usa el operador <code>[i, ]</code> (dejando libre el índice de la columna), mientras que para <strong>acceder a la columna j-ésima de la matriz</strong> se usa el operador <code>[, j]</code>. Para <strong>acceder al elemento <code>(i, j)</code></strong> se usa el operador <code>[i, j]</code>. También habrás observado que, si escribes los bucles en tu script, tienen una flecha a la izquierda para ser minimizados.</p>
<p>La pregunta es: <strong>¿no hay una forma más eficiente de hacerlo?</strong></p>
<p>La respuesta: sí. La <strong>función <code><a href="https://rdrr.io/r/base/apply.html">apply()</a></code> nos permite ejecutar una función por filas o por columnas</strong>.</p>
<div class="sourceCode" id="cb341"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Suma por filas (MARGIN = 1) quitando NA</span>
<span class="va">suma_por_filas</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/apply.html">apply</a></span><span class="op">(</span><span class="va">x</span>, MARGIN <span class="op">=</span> <span class="fl">1</span>, FUN <span class="op">=</span> <span class="st">"sum"</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>
<span class="va">suma_por_filas</span> </code></pre></div>
<pre><code>## [1]     33021 683867433 621576793 618229320     33111 914752324     17213</code></pre>
<div class="sourceCode" id="cb343"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Una función cualquiera por filas</span>
<span class="va">operacion_por_filas</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/apply.html">apply</a></span><span class="op">(</span><span class="va">x</span>, MARGIN <span class="op">=</span> <span class="fl">1</span>, FUN <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">{</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/MathFun.html">sqrt</a></span><span class="op">(</span><span class="fl">2</span><span class="op">)</span> <span class="op">-</span> <span class="fl">2</span><span class="op">)</span> <span class="op">}</span><span class="op">)</span>
<span class="va">operacion_por_filas</span></code></pre></div>
<pre><code>## [1] -0.5857864 -0.5857864 -0.5857864 -0.5857864 -0.5857864 -0.5857864 -0.5857864</code></pre>
<div class="sourceCode" id="cb345"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Suma por columnas (MARGIN = 2) quitando NA</span>
<span class="va">suma_por_cols</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/apply.html">apply</a></span><span class="op">(</span><span class="va">x</span>, MARGIN <span class="op">=</span> <span class="fl">2</span>, FUN <span class="op">=</span> <span class="st">"sum"</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>
<span class="va">suma_por_cols</span></code></pre></div>
<pre><code>##     edades        tlf         cp 
##        305 2838317572     191338</code></pre>
<p>Como puedes observar, necesitas tres argmentos y otros opcionales: la matriz, el índice por el que operar (<code>MARGIN = 1</code> por filas, <code>MARGIN = 2</code> por columnas) y la función a aplicar, amén de otros argumentos extras que pudiera necesitar la función.</p>
<p>Veamos qué es más eficiente con el ya conocido paquete <a href="https://github.com/joshuaulrich/microbenchmark/">microbenchmark</a>.</p>
<div class="sourceCode" id="cb347"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">microbenchmark</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/microbenchmark/man/microbenchmark.html">microbenchmark</a></span><span class="op">(</span><span class="kw">for</span> <span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="fu"><a href="https://rdrr.io/r/base/dim.html">dim</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span><span class="op">)</span> <span class="op">{</span>
  <span class="va">suma_por_filas</span><span class="op">[</span><span class="va">i</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">x</span><span class="op">[</span><span class="va">i</span>, <span class="op">]</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">}</span>, <span class="fu"><a href="https://rdrr.io/r/base/apply.html">apply</a></span><span class="op">(</span><span class="va">x</span>, MARGIN <span class="op">=</span> <span class="fl">1</span>, FUN <span class="op">=</span> <span class="st">"sum"</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>, times <span class="op">=</span> <span class="fl">1e2</span><span class="op">)</span> <span class="co"># Comparamos tiempos de ejecución de ambas formas, y lo repetimos 100 veces para sacar tiempos medios</span></code></pre></div>
<pre><code>## Unit: microseconds
##                                                                           expr
##  for (i in 1:dim(x)[1]) {     suma_por_filas[i] &lt;- sum(x[i, ], na.rm = TRUE) }
##                                apply(x, MARGIN = 1, FUN = "sum", na.rm = TRUE)
##       min        lq       mean   median       uq      max neval cld
##  1704.353 1822.6360 2064.46019 1938.865 2129.960 6012.278   100   b
##    20.888   26.0095   37.18628   35.075   44.611  104.890   100  a</code></pre>
<p><strong>¡El bucle nos tarda 50 veces más que el <code>apply</code>!</strong></p>
<div class="rmdimportant">
<p><strong><span style="color: #20935E;">CONSEJO</span></strong></p>
<p>Di no a los bucles: casi siempre hay una forma mejor de hacerlo.</p>
</div>
</div>
<div id="tablas-data.frames" class="section level2">
<h2>
<span class="header-section-number">6.3</span> Tablas: data.frames<a class="anchor" aria-label="anchor" href="#tablas-data.frames"><i class="fas fa-link"></i></a>
</h2>
<p>Además del nombre de las columnas que ha heredado la matriz <code>x</code> de la concatenación de las columnas que hemos realizado, podemos poner <strong>nombre a los registros</strong>, por ejemplo, el nombre de las personas a las que pertenece cada dato, definiendo una nueva variable con los nombres y concatenándola.</p>
<div class="sourceCode" id="cb349"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">nombres</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Sonia"</span>, <span class="st">"Carla"</span>, <span class="st">"Pepito"</span>, <span class="st">"Carlos"</span>, <span class="st">"Lara"</span>, <span class="st">"Sandra"</span>, <span class="st">"Javi"</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/cbind.html">cbind</a></span><span class="op">(</span><span class="va">nombres</span>, <span class="va">x</span><span class="op">)</span></code></pre></div>
<pre><code>##      nombres  edades tlf         cp     
## [1,] "Sonia"  "14"   NA          "33007"
## [2,] "Carla"  "24"   "683839390" "28019"
## [3,] "Pepito" "56"   "621539732" "37005"
## [4,] "Carlos" "31"   "618211286" "18003"
## [5,] "Lara"   "20"   NA          "33091"
## [6,] "Sandra" "87"   "914727164" "25073"
## [7,] "Javi"   "73"   NA          "17140"</code></pre>
<p><strong>¿Has visto lo que ha sucedido?</strong></p>
<p>Como <strong>una matriz SOLO puede tener un tipo de dato</strong>, al añadir una variable de tipo textos, ha convertido los números también a texto poniéndole comillas: <strong>hemos roto la integridad de nuestro dato</strong>. Una forma de añadir <strong>nombre a los registros, sin incluirlo como variable</strong>, es usando la función <code><a href="https://rdrr.io/r/base/row.names.html">row.names()</a></code>.</p>
<div class="sourceCode" id="cb351"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/row.names.html">row.names</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Sonia"</span>, <span class="st">"Carla"</span>, <span class="st">"Pepito"</span>, <span class="st">"Carlos"</span>, <span class="st">"Lara"</span>, <span class="st">"Sandra"</span>, <span class="st">"Javi"</span><span class="op">)</span>
<span class="va">x</span></code></pre></div>
<pre><code>##        edades       tlf    cp
## Sonia      14        NA 33007
## Carla      24 683839390 28019
## Pepito     56 621539732 37005
## Carlos     31 618211286 18003
## Lara       20        NA 33091
## Sandra     87 914727164 25073
## Javi       73        NA 17140</code></pre>
<p> </p>
<p><em>¿Qué sucede si realmente queremos añadir variables cuyos tipos sean distintos (¡ojo, pero con la misma longitud!)?</em></p>
<p>Vamos a crear nuevas variables de texto <code>nombres</code> y <code>apellidos</code>, un valor lógico <code>casado</code> y una fecha <code>fecha_creacion</code> (fecha de entrada en el sistema) para cada persona.</p>
<div class="sourceCode" id="cb353"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Nombres</span>
<span class="va">nombres</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Sonia"</span>, <span class="st">"Carla"</span>, <span class="st">"Pepito"</span>, <span class="st">"Carlos"</span>, <span class="st">"Lara"</span>, <span class="st">"Sandra"</span>, <span class="st">"Javi"</span><span class="op">)</span>

<span class="co"># Apellidos</span>
<span class="va">apellidos</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Pérez"</span>, <span class="st">"González"</span>, <span class="st">"Fernández"</span>, <span class="st">"Martínez"</span>, <span class="st">"Liébana"</span>, <span class="st">"García"</span>, <span class="st">"Ortiz"</span><span class="op">)</span>

<span class="co"># Estado civil (no lo sabemos de una persona)</span>
<span class="va">casado</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="cn">TRUE</span>, <span class="cn">FALSE</span>, <span class="cn">FALSE</span>, <span class="cn">NA</span>, <span class="cn">TRUE</span>, <span class="cn">FALSE</span>, <span class="cn">FALSE</span><span class="op">)</span>

<span class="co"># Fecha de creación (fecha en el que esa persona entra en el sistema)</span>
<span class="co"># lo convertimos a tipo fecha</span>
<span class="va">fecha_creacion</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html">as.Date</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"2021-03-04"</span>, <span class="st">"2020-10-12"</span>, <span class="st">"1990-04-05"</span>,
                            <span class="st">"2019-09-10"</span>, <span class="st">"2017-03-21"</span>, <span class="st">"2020-07-07"</span>,
                            <span class="st">"2000-01-28"</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<p>Seguimos teniendo 7 registros, uno por persona pero ahora tenemos un popurrí de variables, de la <strong>misma longitud pero de tipos distintos</strong>:</p>
<ul>
<li>
<code>(edades, tlf, cp)</code> son variables numéricas.</li>
<li>
<code>(nombres, apellidos)</code> son variables de texto.</li>
<li>
<code>casado</code> es una variable lógica.</li>
<li>
<code>fecha_creacion</code> de tipo fecha.</li>
</ul>
<p><strong>¿Qué sucedería si yo intento mezclar todo en una matriz?</strong></p>
<div class="sourceCode" id="cb354"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Juntamos todo en una matriz (juntamos por columnas)</span>
<span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html">cbind</a></span><span class="op">(</span><span class="va">nombres</span>, <span class="va">apellidos</span>, <span class="va">edades</span>, <span class="va">tlf</span>, <span class="va">cp</span>, <span class="va">casado</span>, <span class="va">fecha_creacion</span><span class="op">)</span>
<span class="va">x</span></code></pre></div>
<pre><code>##      nombres  apellidos   edades tlf         cp      casado  fecha_creacion
## [1,] "Sonia"  "Pérez"     "14"   NA          "33007" "TRUE"  "18690"       
## [2,] "Carla"  "González"  "24"   "683839390" "28019" "FALSE" "18547"       
## [3,] "Pepito" "Fernández" "56"   "621539732" "37005" "FALSE" "7399"        
## [4,] "Carlos" "Martínez"  "31"   "618211286" "18003" NA      "18149"       
## [5,] "Lara"   "Liébana"   "20"   NA          "33091" "TRUE"  "17246"       
## [6,] "Sandra" "García"    "87"   "914727164" "25073" "FALSE" "18450"       
## [7,] "Javi"   "Ortiz"     "73"   NA          "17140" "FALSE" "10984"</code></pre>
<p>Efectivamente: como <strong>en una matriz solo puede haber datos de un tipo</strong>, los números los convierte a texto, las variables lógicas las convierte a texto (<code>TRUE</code> es un valor lógico, <code>"TRUE"</code> es un texto, como <code>"Pepito"</code>, sin significado lógico - booleano - de verdadero/falso) y las fechas las ha convertido a texto (aunque las veas igual, ya no son de tipo de fecha, son texto y no podemos operar con ellas).</p>
<div class="sourceCode" id="cb356"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Días entre la primera y el segundo elemento de fecha de creación</span>
<span class="va">fecha_creacion</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span> <span class="op">-</span> <span class="va">fecha_creacion</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span></code></pre></div>
<pre><code>## Time difference of 143 days</code></pre>
<div class="sourceCode" id="cb358"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Días entre primera y segunda fecha de creación pero tomándolo de nuestra matriz (columna 7, fila 1 y 2)</span>
<span class="va">x</span><span class="op">[</span><span class="fl">1</span>, <span class="fl">7</span><span class="op">]</span> <span class="op">-</span> <span class="va">x</span><span class="op">[</span><span class="fl">2</span>, <span class="fl">7</span><span class="op">]</span></code></pre></div>
<pre><code>## Error in x[1, 7] - x[2, 7]: argumento no-numérico para operador binario</code></pre>
<p> </p>
<p>He aquí LA pregunta: <strong>¿cómo juntar variables de distinto tipo, sin cambiar su naturaleza, como cuando juntamos datos en una tabla de excel?</strong></p>
<p>El formato de tabla de datos en <code>R</code> que vamos a empezar a usar se llama <strong>data.frame</strong>: una <strong>colección de variables de igual longitud pero cada una de un tipo distinto</strong>. Para crear un objeto de este tipo basta con usar la función <code><a href="https://rdrr.io/r/base/data.frame.html">data.frame()</a></code>, pasándole como argumentos (separados por comas) las variables que queremos reunir, indicando en texto <code>"..."</code> el nombre de las columnas.</p>
<div class="sourceCode" id="cb360"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Creamos nuestro primer data.frame</span>
<span class="va">tabla</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span><span class="st">"Nombre"</span> <span class="op">=</span> <span class="va">nombres</span>, <span class="st">"Apellido"</span> <span class="op">=</span> <span class="va">apellidos</span>,
                    <span class="st">"Edad"</span> <span class="op">=</span> <span class="va">edades</span>, <span class="st">"Teléfono"</span> <span class="op">=</span> <span class="va">tlf</span>,
                    <span class="st">"Código Postal"</span> <span class="op">=</span> <span class="va">cp</span>, <span class="st">"Casado"</span> <span class="op">=</span> <span class="va">casado</span>,
                    <span class="st">"Fecha_de_creación"</span> <span class="op">=</span> <span class="va">fecha_creacion</span><span class="op">)</span>
<span class="va">tabla</span></code></pre></div>
<pre><code>##   Nombre  Apellido Edad  Teléfono Código.Postal Casado Fecha_de_creación
## 1  Sonia     Pérez   14        NA         33007   TRUE        2021-03-04
## 2  Carla  González   24 683839390         28019  FALSE        2020-10-12
## 3 Pepito Fernández   56 621539732         37005  FALSE        1990-04-05
## 4 Carlos  Martínez   31 618211286         18003     NA        2019-09-10
## 5   Lara   Liébana   20        NA         33091   TRUE        2017-03-21
## 6 Sandra    García   87 914727164         25073  FALSE        2020-07-07
## 7   Javi     Ortiz   73        NA         17140  FALSE        2000-01-28</code></pre>
<p><strong>¡TENEMOS NUESTRO PRIMER CONJUNTO DE DATOS!</strong></p>
<div id="data.frames-selección-manual-de-columnas-y-filas" class="section level3">
<h3>
<span class="header-section-number">6.3.1</span> Data.frames: selección manual de columnas y filas<a class="anchor" aria-label="anchor" href="#data.frames-selecci%C3%B3n-manual-de-columnas-y-filas"><i class="fas fa-link"></i></a>
</h3>
<p>Si tenemos un <code>data.frame</code> ya creado y queremos <strong>añadir una columna</strong> es tan simple como usar la función <code><a href="https://rdrr.io/r/base/data.frame.html">data.frame()</a></code> que ya hemos visto para concatenar la columna. Si queremos acceder a una columna, fila o elemento en concreto, <strong>los <code>data.frame</code> tienes las mismas ventajas que una matriz</strong>, así basta con usar los mismos operadores.</p>
<div class="sourceCode" id="cb362"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Añadimos una nueva columna con nº de hermanos/as</span>
<span class="va">hermanos</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">1</span>, <span class="fl">5</span>, <span class="fl">2</span>, <span class="fl">3</span>, <span class="fl">0</span><span class="op">)</span>
<span class="va">tabla</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span><span class="va">tabla</span>, <span class="va">hermanos</span><span class="op">)</span>
<span class="va">tabla</span></code></pre></div>
<pre><code>##   Nombre  Apellido Edad  Teléfono Código.Postal Casado Fecha_de_creación
## 1  Sonia     Pérez   14        NA         33007   TRUE        2021-03-04
## 2  Carla  González   24 683839390         28019  FALSE        2020-10-12
## 3 Pepito Fernández   56 621539732         37005  FALSE        1990-04-05
## 4 Carlos  Martínez   31 618211286         18003     NA        2019-09-10
## 5   Lara   Liébana   20        NA         33091   TRUE        2017-03-21
## 6 Sandra    García   87 914727164         25073  FALSE        2020-07-07
## 7   Javi     Ortiz   73        NA         17140  FALSE        2000-01-28
##   hermanos
## 1        0
## 2        0
## 3        1
## 4        5
## 5        2
## 6        3
## 7        0</code></pre>
<div class="sourceCode" id="cb364"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Accedemos a la tercera columna</span>
<span class="va">tabla</span><span class="op">[</span>, <span class="fl">3</span><span class="op">]</span></code></pre></div>
<pre><code>## [1] 14 24 56 31 20 87 73</code></pre>
<div class="sourceCode" id="cb366"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Accedemos a la quinta fila</span>
<span class="va">tabla</span><span class="op">[</span><span class="fl">5</span>, <span class="op">]</span></code></pre></div>
<pre><code>##   Nombre Apellido Edad Teléfono Código.Postal Casado Fecha_de_creación hermanos
## 5   Lara  Liébana   20       NA         33091   TRUE        2017-03-21        2</code></pre>
<div class="sourceCode" id="cb368"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Accedemos a la tercera variable del quinto registro</span>
<span class="va">tabla</span><span class="op">[</span><span class="fl">5</span>, <span class="fl">3</span><span class="op">]</span></code></pre></div>
<pre><code>## [1] 20</code></pre>
<p>Un <code>data.frame</code> <strong>no solo tiene las ventajas de una matriz sino que también tiene las ventajas de una tabla de datos</strong>. Por ejemplo, podemos <strong>aceder a las variables</strong> por el índice de columna que ocupan pero <strong>también por su nombre</strong>, poniendo el nombre de la tabla, el símbolo <code><a href="https://rdrr.io/r/base/Extract.html">$</a></code> y con el tabulador nos aparecerá un menú de columnas a elegir.</p>
<div class="figure" style="text-align: center">
<span style="display:block;" id="fig:tabla-dolar"></span>
<img src="img/tabla_dolar.jpg" alt="Menú desplegable de variables (columnas) de un data.frame." width="50%"><p class="caption">
Imagen/gráfica 6.1: Menú desplegable de variables (columnas) de un data.frame.
</p>
</div>
<p><strong>Volvamos a nuestro script</strong>.</p>
<p>Vamos a crear un script nuevo en la caprta <code>CODIGOS</code> de nuestro proyecto que se llame <code>primer_data_frame.R</code>. En él vamos a definir las variables que habíamos lanzado en consola, y vamos a construir el mismo <code>data.frame</code> llamado <code>tabla</code> que teníamos pero en nuestro script.</p>
<div class="figure" style="text-align: center">
<span style="display:block;" id="fig:codigo-primer-data-frame"></span>
<img src="img/codigo_primer_data_frame.jpg" alt="Creando nuestro primer data.frame en el script." width="50%"><p class="caption">
Imagen/gráfica 6.2: Creando nuestro primer data.frame en el script.
</p>
</div>
<div class="sourceCode" id="cb370"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Descripción: creación de nuestros primeros data.frame</span>

<span class="co"># Variables</span>
<span class="va">edades</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">14</span>, <span class="fl">24</span>, <span class="fl">56</span>, <span class="fl">31</span>, <span class="fl">20</span>, <span class="fl">87</span>, <span class="fl">73</span><span class="op">)</span> <span class="co"># vector numérico de longitud 7</span>
<span class="va">tlf</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="cn">NA</span>, <span class="fl">683839390</span>, <span class="fl">621539732</span>, <span class="fl">618211286</span>, <span class="cn">NA</span>, <span class="fl">914727164</span>, <span class="cn">NA</span><span class="op">)</span>
<span class="va">cp</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">33007</span>, <span class="fl">28019</span>, <span class="fl">37005</span>, <span class="fl">18003</span>, <span class="fl">33091</span>, <span class="fl">25073</span>, <span class="fl">17140</span><span class="op">)</span>
<span class="va">nombres</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Sonia"</span>, <span class="st">"Carla"</span>, <span class="st">"Pepito"</span>, <span class="st">"Carlos"</span>, <span class="st">"Lara"</span>, <span class="st">"Sandra"</span>, <span class="st">"Javi"</span><span class="op">)</span>
<span class="va">apellidos</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Pérez"</span>, <span class="st">"González"</span>, <span class="st">"Fernández"</span>, <span class="st">"Martínez"</span>, <span class="st">"Liébana"</span>, <span class="st">"García"</span>, <span class="st">"Ortiz"</span><span class="op">)</span>
<span class="va">casado</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="cn">TRUE</span>, <span class="cn">FALSE</span>, <span class="cn">FALSE</span>, <span class="cn">NA</span>, <span class="cn">TRUE</span>, <span class="cn">FALSE</span>, <span class="cn">FALSE</span><span class="op">)</span>
<span class="va">fecha_creacion</span> <span class="op">&lt;-</span>
  <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html">as.Date</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"2021-03-04"</span>, <span class="st">"2020-10-12"</span>, <span class="st">"1990-04-05"</span>, <span class="st">"2019-09-10"</span>,
            <span class="st">"2017-03-21"</span>, <span class="st">"2020-07-07"</span>, <span class="st">"2000-01-28"</span><span class="op">)</span><span class="op">)</span>
<span class="va">hermanos</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">1</span>, <span class="fl">5</span>, <span class="fl">2</span>, <span class="fl">3</span>, <span class="fl">0</span><span class="op">)</span>

<span class="co"># Creamos el data.frame</span>
<span class="va">tabla</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span><span class="st">"Nombre"</span> <span class="op">=</span> <span class="va">nombres</span>, <span class="st">"Apellido"</span> <span class="op">=</span> <span class="va">apellidos</span>,
                    <span class="st">"Edad"</span> <span class="op">=</span> <span class="va">edades</span>, <span class="st">"Teléfono"</span> <span class="op">=</span> <span class="va">tlf</span>, <span class="st">"Código Postal"</span> <span class="op">=</span> <span class="va">cp</span>,
                    <span class="st">"Casado"</span> <span class="op">=</span> <span class="va">casado</span>, <span class="st">"Fecha_de_creación"</span> <span class="op">=</span> <span class="va">fecha_creacion</span><span class="op">)</span>
<span class="va">tabla</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span><span class="va">tabla</span>, <span class="va">hermanos</span><span class="op">)</span>
<span class="va">tabla</span></code></pre></div>
<pre><code>##   Nombre  Apellido Edad  Teléfono Código.Postal Casado Fecha_de_creación
## 1  Sonia     Pérez   14        NA         33007   TRUE        2021-03-04
## 2  Carla  González   24 683839390         28019  FALSE        2020-10-12
## 3 Pepito Fernández   56 621539732         37005  FALSE        1990-04-05
## 4 Carlos  Martínez   31 618211286         18003     NA        2019-09-10
## 5   Lara   Liébana   20        NA         33091   TRUE        2017-03-21
## 6 Sandra    García   87 914727164         25073  FALSE        2020-07-07
## 7   Javi     Ortiz   73        NA         17140  FALSE        2000-01-28
##   hermanos
## 1        0
## 2        0
## 3        1
## 4        5
## 5        2
## 6        3
## 7        0</code></pre>
<div class="figure" style="text-align: center">
<span style="display:block;" id="fig:codigo-2"></span>
<img src="img/codigo_2.jpg" alt="Llamando a nuestro script desde nuestro código principal." width="50%"><p class="caption">
Imagen/gráfica 6.3: Llamando a nuestro script desde nuestro código principal.
</p>
</div>
<p>Además de dicho conjunto de datos, vamos a instalar (sino lo hemos hecho nunca en este ordenador) un paquete muy útil en <code>R</code> llamado <code>{datasets}</code>. Los paquetes que vayamos necesitando los instalaremos y llamaremos al inicio del código principal.</p>
<div class="figure" style="text-align: center">
<span style="display:block;" id="fig:carga-paquetes-inicial"></span>
<img src="img/carga_paquetes_inicial.jpg" alt="Instalamos y cargamos los paquetes necesarios al principio de nuestro main.R." width="50%"><p class="caption">
Imagen/gráfica 6.4: Instalamos y cargamos los paquetes necesarios al principio de nuestro main.R.
</p>
</div>
<div class="sourceCode" id="cb372"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Paquetes necesarios</span>
<span class="co"># install.packages("datasets") # Descomentar si nunca se ha instalado</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va">datasets</span><span class="op">)</span></code></pre></div>
<p>Tras ello llamaremos a nuestro script <code>primer_data_frame.R</code> desde nuestro código principal <code>main.R</code> y guardaremos el script con el <em>source on save</em> activado para que se ejecute. Además de que ahora tenemos nuestro conjunto de datos <code>tabla</code> en nuestro panel de entorno, si escribimos <code>datasets::</code> y pulsamos tabulador, se nos abre un desplegable con distintos conjuntos de datos para ser usados: el paquete <code>datasets</code> nos proporciona <code>data.frames</code> de prueba para que podamos usarlos en nuestros códigos según vamos aprendiendo.</p>
<div class="figure" style="text-align: center">
<span style="display:block;" id="fig:datasets"></span>
<img src="img/datasets.jpg" alt="Menú desplegable con los data.frame de prueba en datasets" width="50%"><p class="caption">
Imagen/gráfica 6.5: Menú desplegable con los data.frame de prueba en datasets
</p>
</div>
<p>Una de las <strong>ventajas de los <code>data.frame</code></strong> es que podemos visualizarlos como si fuera una tabla de Excel dentro de nuestro <code>R</code> con la función <code><a href="https://rdrr.io/r/utils/View.html">View()</a></code>. Vamos a visualizar no solo el conjunto de datos <code>tabla</code> sino también el conjunto <code>iris</code> del paquete <code>datasets</code>: <strong>los <code>data.frame</code> nos permiten trabajar con ellos como bases de datos o como matrices, con las ventajas de ambos</strong>.</p>
<div class="sourceCode" id="cb373"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/View.html">View</a></span><span class="op">(</span><span class="va">iris</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/utils/View.html">View</a></span><span class="op">(</span><span class="va">tabla</span><span class="op">)</span></code></pre></div>
<div class="figure" style="text-align: center">
<span style="display:block;" id="fig:view-datasets"></span>
<img src="img/view_datasets.jpg" alt="Menú desplegable con los data.frame de prueba en datasets" width="50%"><p class="caption">
Imagen/gráfica 6.6: Menú desplegable con los data.frame de prueba en datasets
</p>
</div>
<p> </p>
<p>En el caso de los <code>data.frame</code> tenemos además a nuestro disposición una <strong>herramienta muy potente: la función <code><a href="https://rdrr.io/r/base/subset.html">subset()</a></code></strong> Dicha función nos va a permitir seleccionar filas y columnas automáticamente, tomando de entrada los siguientes argumentos</p>
<ul>
<li>
<code>x</code>: una tabla de entrada, un <code>data.frame</code> de entrada.</li>
<li>
<code>subset</code>: la condición lógica que queramos usar para seleccionar registros (filas).</li>
<li>
<code>select</code>: un vector que contenga el nombre de las columnas que queremos seleccionar (a lo mejor solo queremos filtrar por filas pero quizás también por columnas).</li>
</ul>
<p>Por ejemplo, vamos a seleccionar solo los nombres y apellidos de aquellas personas mayores de edad de nuestro conjunto de datos <code>tabla</code>, y del conjunto <code>iris</code> vamos a extraer todos los registros en los que el largo del sépalo es mayor que 7.1, seleccionando solo las columnas de longitud de sépalo y la especie de la planta.</p>
<div class="sourceCode" id="cb374"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/subset.html">subset</a></span><span class="op">(</span><span class="va">tabla</span>, subset <span class="op">=</span> <span class="va">Edad</span> <span class="op">&gt;</span> <span class="fl">18</span>, select <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Nombre"</span>, <span class="st">"Apellido"</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<pre><code>##   Nombre  Apellido
## 2  Carla  González
## 3 Pepito Fernández
## 4 Carlos  Martínez
## 5   Lara   Liébana
## 6 Sandra    García
## 7   Javi     Ortiz</code></pre>
<div class="sourceCode" id="cb376"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/subset.html">subset</a></span><span class="op">(</span><span class="va">iris</span>, subset <span class="op">=</span> <span class="va">Sepal.Length</span> <span class="op">&gt;</span> <span class="fl">7.1</span>, select <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Sepal.Length"</span>, <span class="st">"Species"</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<pre><code>##     Sepal.Length   Species
## 106          7.6 virginica
## 108          7.3 virginica
## 110          7.2 virginica
## 118          7.7 virginica
## 119          7.7 virginica
## 123          7.7 virginica
## 126          7.2 virginica
## 130          7.2 virginica
## 131          7.4 virginica
## 132          7.9 virginica
## 136          7.7 virginica</code></pre>
<div class="inline-table"><table class="table table-sm">
<caption>
<span id="tab:unnamed-chunk-138">Tabla 6.1: </span>Paquetes mencionados hasta ahora</caption>
<thead><tr class="header">
<th align="left">paquetes</th>
<th align="left">descripción</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">{base}</td>
<td align="left">utilidades básicas</td>
</tr>
<tr class="even">
<td align="left">{bookdown}</td>
<td align="left">creación de libros, manuales e informes en R</td>
</tr>
<tr class="odd">
<td align="left">{glue}</td>
<td align="left">manejo de texto literal</td>
</tr>
<tr class="even">
<td align="left">{stringr}</td>
<td align="left">manejo complejo de cadenas de texto</td>
</tr>
<tr class="odd">
<td align="left">{lubridate}</td>
<td align="left">manejo de fechas</td>
</tr>
<tr class="even">
<td align="left">{microbenchmark}</td>
<td align="left">comparativa de tiempos de ejecución</td>
</tr>
<tr class="odd">
<td align="left">{tibble}</td>
<td align="left">data.frames eficientes</td>
</tr>
<tr class="even">
<td align="left">{datasets}</td>
<td align="left">conjuntos de datos</td>
</tr>
</tbody>
</table></div>
<div class="rmdimportant">
<p><strong><span style="color: #20935E;">Paquete {tibble}</span></strong></p>
<p>En dicho paquete tienes más <strong>funciones para una gestión más ágil, eficiente y coherente de los <code>data.frame</code></strong>. Las tablas en formato <code>tibble</code> (su clase será <code>tbl_df</code>) tiene 4 ventajas principales frente a los ya vistos <code>data.frame</code>:</p>
<ul>
<li>Permite imprimir por consola la tabla con mayor información de las variables.</li>
<li>Los datos de tipo caracter (cadenas de texto) son guardados como tal (y no como factores, un tipo de dato que veremos más adelante).</li>
<li>Los nombres de las columnas permanecen intactos.</li>
<li>La función <code>tibble()</code> construye las variables secuencialmente, pudiendo hacer uso en la propia definición de variables recién definidas en dicha definición.</li>
</ul>
<p>Puedes consultar más funcionalidades en <a href="https://tibble.tidyverse.org/" class="uri">https://tibble.tidyverse.org/</a>.</p>
</div>
<div class="rmdimportant">
<p><strong><span style="color: #20935E;">Nombre de variables</span></strong></p>
<p>La función <code><a href="https://rdrr.io/r/base/names.html">names()</a></code> no solo sirve para consultar los nombres de las variables de un <code>data.frame</code> sino también para cambiarlos a nuestro gusto.</p>
<div class="sourceCode" id="cb378"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Consultamos nombres</span>
<span class="fu"><a href="https://rdrr.io/r/base/names.html">names</a></span><span class="op">(</span><span class="va">tabla</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] "Nombre"            "Apellido"          "Edad"             
## [4] "Teléfono"          "Código.Postal"     "Casado"           
## [7] "Fecha_de_creación" "hermanos"</code></pre>
<div class="sourceCode" id="cb380"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Cambiamos nombres</span>
<span class="fu"><a href="https://rdrr.io/r/base/names.html">names</a></span><span class="op">(</span><span class="va">tabla</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"nombre_persona"</span>, <span class="st">"apellido_persona"</span>, <span class="st">"edad"</span>, <span class="st">"tlf"</span>,
                  <span class="st">"cp"</span>, <span class="st">"casado"</span>, <span class="st">"f_creacion"</span><span class="op">)</span>
<span class="va">tabla</span></code></pre></div>
<pre><code>##   nombre_persona apellido_persona edad       tlf    cp casado f_creacion NA
## 1          Sonia            Pérez   14        NA 33007   TRUE 2021-03-04  0
## 2          Carla         González   24 683839390 28019  FALSE 2020-10-12  0
## 3         Pepito        Fernández   56 621539732 37005  FALSE 1990-04-05  1
## 4         Carlos         Martínez   31 618211286 18003     NA 2019-09-10  5
## 5           Lara          Liébana   20        NA 33091   TRUE 2017-03-21  2
## 6         Sandra           García   87 914727164 25073  FALSE 2020-07-07  3
## 7           Javi            Ortiz   73        NA 17140  FALSE 2000-01-28  0</code></pre>
</div>
</div>
</div>
<div id="ejercicios-2" class="section level2">
<h2>
<span class="header-section-number">6.4</span> 📝 Ejercicios<a class="anchor" aria-label="anchor" href="#ejercicios-2"><i class="fas fa-link"></i></a>
</h2>
<details><p><summary><strong>Ejercicio 1</strong>: define una matriz <code>x</code> de ceros de 3 filas y 7 columnas.</summary></p>
<ul>
<li>Solución:</li>
</ul>
<div class="sourceCode" id="cb382"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Matriz</span>
<span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html">matrix</a></span><span class="op">(</span><span class="fl">0</span>, nrow <span class="op">=</span> <span class="fl">3</span>, ncol <span class="op">=</span> <span class="fl">7</span><span class="op">)</span>
<span class="va">x</span></code></pre></div>
<pre><code>##      [,1] [,2] [,3] [,4] [,5] [,6] [,7]
## [1,]    0    0    0    0    0    0    0
## [2,]    0    0    0    0    0    0    0
## [3,]    0    0    0    0    0    0    0</code></pre>
</details><p> </p>
<details><p><summary><strong>Ejercicio 2</strong>: tras definir la matriz <code>x</code> calcula su transpuesta y obtén sus dimensiones</summary></p>
<ul>
<li>Solución:</li>
</ul>
<div class="sourceCode" id="cb384"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Transpuesta</span>
<span class="fu"><a href="https://rdrr.io/r/base/t.html">t</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span></code></pre></div>
<pre><code>##      [,1] [,2] [,3]
## [1,]    0    0    0
## [2,]    0    0    0
## [3,]    0    0    0
## [4,]    0    0    0
## [5,]    0    0    0
## [6,]    0    0    0
## [7,]    0    0    0</code></pre>
<div class="sourceCode" id="cb386"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Dimensiones transpuesta: pasa de ser 3x7 a 7x3</span>
<span class="fu"><a href="https://rdrr.io/r/base/dim.html">dim</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/t.html">t</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] 7 3</code></pre>
<div class="sourceCode" id="cb388"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/nrow.html">ncol</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/t.html">t</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] 3</code></pre>
<div class="sourceCode" id="cb390"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/nrow.html">nrow</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/t.html">t</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] 7</code></pre>
</details><p> </p>
<details><p><summary><strong>Ejercicio 3</strong>: calcula la suma de cada fila de la matriz <code><a href="https://rdrr.io/r/base/matrix.html">matrix(1:12, nrow = 4)</a></code> usando un bucle. Haz lo mismo evitando usar bucles.</summary></p>
<ul>
<li>Solución:</li>
</ul>
<div class="sourceCode" id="cb392"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Matriz</span>
<span class="va">matriz</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html">matrix</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">12</span>, nrow <span class="op">=</span> <span class="fl">4</span><span class="op">)</span>

<span class="co"># Con bucle (recorremos sus filas)</span>
<span class="va">suma</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fu"><a href="https://rdrr.io/r/base/nrow.html">nrow</a></span><span class="op">(</span><span class="va">matriz</span><span class="op">)</span><span class="op">)</span> <span class="co"># Definimos un vector de 0's con tantos elementos como filas, donde iremos metiendo los valores de la suma</span>
<span class="kw">for</span> <span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html">nrow</a></span><span class="op">(</span><span class="va">matriz</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span>
  
  <span class="va">suma</span><span class="op">[</span><span class="va">i</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">matriz</span><span class="op">[</span><span class="va">i</span>, <span class="op">]</span><span class="op">)</span> <span class="co"># Sumamos la fila i</span>
<span class="op">}</span>
<span class="va">suma</span></code></pre></div>
<pre><code>## [1] 15 18 21 24</code></pre>
<div class="sourceCode" id="cb394"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Sin bucle (MARGIN = 1 ya que es una operación por filas)</span>
<span class="va">suma</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/apply.html">apply</a></span><span class="op">(</span><span class="va">matriz</span>, MARGIN <span class="op">=</span> <span class="fl">1</span>, FUN <span class="op">=</span> <span class="st">"sum"</span><span class="op">)</span>
<span class="va">suma</span></code></pre></div>
<pre><code>## [1] 15 18 21 24</code></pre>
</details><p> </p>
<details><p><summary><strong>Ejercicio 4</strong>: del conjunto <code>iris</code> del paquete <code>{datasets}</code> obtén el nombre de las variables, y selecciona aquellas filas cuya variable <code>Petal.Width</code> sea distinta de 0.2, y quédate solo con las variables <code>Sepal.Length</code>, <code>Sepal.Width</code> y <code>Species</code>.</summary></p>
<ul>
<li>Solución:</li>
</ul>
<div class="sourceCode" id="cb396"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Nombres de variables</span>
<span class="fu"><a href="https://rdrr.io/r/base/names.html">names</a></span><span class="op">(</span><span class="va">iris</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] "Sepal.Length" "Sepal.Width"  "Petal.Length" "Petal.Width"  "Species"</code></pre>
<div class="sourceCode" id="cb398"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Filtramos filas</span>
<span class="va">filtro_fila</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/subset.html">subset</a></span><span class="op">(</span><span class="va">iris</span>, subset <span class="op">=</span> <span class="va">Petal.Width</span> <span class="op">!=</span> <span class="fl">0.2</span><span class="op">)</span>

<span class="co"># Filtramos columnas</span>
<span class="va">filtro_col</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/subset.html">subset</a></span><span class="op">(</span><span class="va">filtro_fila</span>,  select <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Sepal.Length"</span>, <span class="st">"Sepal.Width"</span>, <span class="st">"Species"</span><span class="op">)</span><span class="op">)</span>

<span class="co"># Todo de una vez</span>
<span class="va">filtro</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/subset.html">subset</a></span><span class="op">(</span><span class="va">iris</span>, subset <span class="op">=</span> <span class="va">Petal.Width</span> <span class="op">!=</span> <span class="fl">0.2</span>, select <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Sepal.Length"</span>, <span class="st">"Sepal.Width"</span>, <span class="st">"Species"</span><span class="op">)</span><span class="op">)</span>
<span class="va">filtro</span></code></pre></div>
<pre><code>##     Sepal.Length Sepal.Width    Species
## 6            5.4         3.9     setosa
## 7            4.6         3.4     setosa
## 10           4.9         3.1     setosa
## 13           4.8         3.0     setosa
## 14           4.3         3.0     setosa
## 16           5.7         4.4     setosa
## 17           5.4         3.9     setosa
## 18           5.1         3.5     setosa
## 19           5.7         3.8     setosa
## 20           5.1         3.8     setosa
## 22           5.1         3.7     setosa
## 24           5.1         3.3     setosa
## 27           5.0         3.4     setosa
## 32           5.4         3.4     setosa
## 33           5.2         4.1     setosa
## 38           4.9         3.6     setosa
## 41           5.0         3.5     setosa
## 42           4.5         2.3     setosa
## 44           5.0         3.5     setosa
## 45           5.1         3.8     setosa
## 46           4.8         3.0     setosa
## 51           7.0         3.2 versicolor
## 52           6.4         3.2 versicolor
## 53           6.9         3.1 versicolor
## 54           5.5         2.3 versicolor
## 55           6.5         2.8 versicolor
## 56           5.7         2.8 versicolor
## 57           6.3         3.3 versicolor
## 58           4.9         2.4 versicolor
## 59           6.6         2.9 versicolor
## 60           5.2         2.7 versicolor
## 61           5.0         2.0 versicolor
## 62           5.9         3.0 versicolor
## 63           6.0         2.2 versicolor
## 64           6.1         2.9 versicolor
## 65           5.6         2.9 versicolor
## 66           6.7         3.1 versicolor
## 67           5.6         3.0 versicolor
## 68           5.8         2.7 versicolor
## 69           6.2         2.2 versicolor
## 70           5.6         2.5 versicolor
## 71           5.9         3.2 versicolor
## 72           6.1         2.8 versicolor
## 73           6.3         2.5 versicolor
## 74           6.1         2.8 versicolor
## 75           6.4         2.9 versicolor
## 76           6.6         3.0 versicolor
## 77           6.8         2.8 versicolor
## 78           6.7         3.0 versicolor
## 79           6.0         2.9 versicolor
## 80           5.7         2.6 versicolor
## 81           5.5         2.4 versicolor
## 82           5.5         2.4 versicolor
## 83           5.8         2.7 versicolor
## 84           6.0         2.7 versicolor
## 85           5.4         3.0 versicolor
## 86           6.0         3.4 versicolor
## 87           6.7         3.1 versicolor
## 88           6.3         2.3 versicolor
## 89           5.6         3.0 versicolor
## 90           5.5         2.5 versicolor
## 91           5.5         2.6 versicolor
## 92           6.1         3.0 versicolor
## 93           5.8         2.6 versicolor
## 94           5.0         2.3 versicolor
## 95           5.6         2.7 versicolor
## 96           5.7         3.0 versicolor
## 97           5.7         2.9 versicolor
## 98           6.2         2.9 versicolor
## 99           5.1         2.5 versicolor
## 100          5.7         2.8 versicolor
## 101          6.3         3.3  virginica
## 102          5.8         2.7  virginica
## 103          7.1         3.0  virginica
## 104          6.3         2.9  virginica
## 105          6.5         3.0  virginica
## 106          7.6         3.0  virginica
## 107          4.9         2.5  virginica
## 108          7.3         2.9  virginica
## 109          6.7         2.5  virginica
## 110          7.2         3.6  virginica
## 111          6.5         3.2  virginica
## 112          6.4         2.7  virginica
## 113          6.8         3.0  virginica
## 114          5.7         2.5  virginica
## 115          5.8         2.8  virginica
## 116          6.4         3.2  virginica
## 117          6.5         3.0  virginica
## 118          7.7         3.8  virginica
## 119          7.7         2.6  virginica
## 120          6.0         2.2  virginica
## 121          6.9         3.2  virginica
## 122          5.6         2.8  virginica
## 123          7.7         2.8  virginica
## 124          6.3         2.7  virginica
## 125          6.7         3.3  virginica
## 126          7.2         3.2  virginica
## 127          6.2         2.8  virginica
## 128          6.1         3.0  virginica
## 129          6.4         2.8  virginica
## 130          7.2         3.0  virginica
## 131          7.4         2.8  virginica
## 132          7.9         3.8  virginica
## 133          6.4         2.8  virginica
## 134          6.3         2.8  virginica
## 135          6.1         2.6  virginica
## 136          7.7         3.0  virginica
## 137          6.3         3.4  virginica
## 138          6.4         3.1  virginica
## 139          6.0         3.0  virginica
## 140          6.9         3.1  virginica
## 141          6.7         3.1  virginica
## 142          6.9         3.1  virginica
## 143          5.8         2.7  virginica
## 144          6.8         3.2  virginica
## 145          6.7         3.3  virginica
## 146          6.7         3.0  virginica
## 147          6.3         2.5  virginica
## 148          6.5         3.0  virginica
## 149          6.2         3.4  virginica
## 150          5.9         3.0  virginica</code></pre>
</details><p> </p>
<details><p><summary><strong>Ejercicio 5</strong>: calcula el número de filas borradas del ejercicio anterior. Tras hacer todo ello, traduce a castellano el nombre de las columnas del <code>data.frame</code> filtrado.</summary></p>
<ul>
<li>Solución:</li>
</ul>
<div class="sourceCode" id="cb400"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Filas borradas</span>
<span class="fu"><a href="https://rdrr.io/r/base/nrow.html">nrow</a></span><span class="op">(</span><span class="va">iris</span><span class="op">)</span> <span class="op">-</span> <span class="fu"><a href="https://rdrr.io/r/base/nrow.html">nrow</a></span><span class="op">(</span><span class="va">filtro</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] 29</code></pre>
<div class="sourceCode" id="cb402"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Cambiamos nombres a castellano del conjunto filtrado</span>
<span class="fu"><a href="https://rdrr.io/r/base/names.html">names</a></span><span class="op">(</span><span class="va">filtro</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"longitud_sepalo"</span>, <span class="st">"anchura_sepalo"</span>, <span class="st">"especies"</span><span class="op">)</span></code></pre></div>
</details>
</div>
</div>
  <div class="chapter-nav">
<div class="prev"><a href="control.html"><span class="header-section-number">5</span> Estructuras de control</a></div>
<div class="next"><a href="importar_exportar.html"><span class="header-section-number">7</span> Importando/exportando</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#datos"><span class="header-section-number">6</span> Datos estructurados: matrices y tablas</a></li>
<li><a class="nav-link" href="#matrices"><span class="header-section-number">6.1</span> Matrices</a></li>
<li><a class="nav-link" href="#apply-vs-bucles"><span class="header-section-number">6.2</span> Apply vs bucles</a></li>
<li>
<a class="nav-link" href="#tablas-data.frames"><span class="header-section-number">6.3</span> Tablas: data.frames</a><ul class="nav navbar-nav"><li><a class="nav-link" href="#data.frames-selecci%C3%B3n-manual-de-columnas-y-filas"><span class="header-section-number">6.3.1</span> Data.frames: selección manual de columnas y filas</a></li></ul>
</li>
<li><a class="nav-link" href="#ejercicios-2"><span class="header-section-number">6.4</span> 📝 Ejercicios</a></li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
<li><a id="book-source" href="https://github.com/dadosdelaplace/cursoR_intro_2021_2022/blob/master/06-datos_estructurados.Rmd">View source <i class="fab fa-github"></i></a></li>
          <li><a id="book-edit" href="https://github.com/dadosdelaplace/cursoR_intro_2021_2022/edit/master/06-datos_estructurados.Rmd">Edit this page <i class="fab fa-github"></i></a></li>
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>Aprendiendo R sin morir en el intento</strong>" was written by Javier Álvarez Liébana. It was last built on Última actualización: 21-09-2021.</p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer><!-- dynamically load mathjax for compatibility with self-contained --><script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script><script type="text/x-mathjax-config">const popovers = document.querySelectorAll('a.footnote-ref[data-toggle="popover"]');
for (let popover of popovers) {
  const div = document.createElement('div');
  div.setAttribute('style', 'position: absolute; top: 0, left:0; width:0, height:0, overflow: hidden; visibility: hidden;');
  div.innerHTML = popover.getAttribute('data-content');

  var has_math = div.querySelector("span.math");
  if (has_math) {
    document.body.appendChild(div);
    MathJax.Hub.Queue(["Typeset", MathJax.Hub, div]);
    MathJax.Hub.Queue(function() {
      popover.setAttribute('data-content', div.innerHTML);
      document.body.removeChild(div);
    })
  }
}
</script>
</body>
</html>
