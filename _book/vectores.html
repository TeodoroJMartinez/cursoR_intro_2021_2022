<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Capítulo 3 Tipos de datos I: vectores | Aprendiendo R sin morir en el intento</title>
<meta name="author" content="Javier Álvarez Liébana">
<meta name="description" content="CONSEJO: recuperar un comando y autocompletar Si haces click con el ratón en la consola y pulsas la flecha «arriba» del teclado, te irá apareciendo todo el historial de órdenes ejecutadas. Es una...">
<meta name="generator" content="bookdown 0.24 with bs4_book()">
<meta property="og:title" content="Capítulo 3 Tipos de datos I: vectores | Aprendiendo R sin morir en el intento">
<meta property="og:type" content="book">
<meta property="og:image" content="/img/logo_R.png">
<meta property="og:description" content="CONSEJO: recuperar un comando y autocompletar Si haces click con el ratón en la consola y pulsas la flecha «arriba» del teclado, te irá apareciendo todo el historial de órdenes ejecutadas. Es una...">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Capítulo 3 Tipos de datos I: vectores | Aprendiendo R sin morir en el intento">
<meta name="twitter:description" content="CONSEJO: recuperar un comando y autocompletar Si haces click con el ratón en la consola y pulsas la flecha «arriba» del teclado, te irá apareciendo todo el historial de órdenes ejecutadas. Es una...">
<meta name="twitter:image" content="/img/logo_R.png">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><link href="libs/_Sen-0.4.0/font.css" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=DM%20Mono&amp;display=swap" rel="stylesheet">
<link href="libs/_Bitter-0.4.0/font.css" rel="stylesheet">
<script src="libs/bs3compat-0.3.0/transition.js"></script><script src="libs/bs3compat-0.3.0/tabs.js"></script><script src="libs/bs3compat-0.3.0/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- CSS -->
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">Aprendiendo R sin morir en el intento</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html">Prefacio</a></li>
<li class="book-part">Toma de contacto</li>
<li><a class="" href="instalacionR.html"><span class="header-section-number">1</span> Instalación</a></li>
<li><a class="" href="primeros-pasos.html"><span class="header-section-number">2</span> Primeros pasos</a></li>
<li class="book-part">Conceptos básicos</li>
<li><a class="active" href="vectores.html"><span class="header-section-number">3</span> Tipos de datos I: vectores</a></li>
<li><a class="" href="proyecto.html"><span class="header-section-number">4</span> Flujo de trabajo: primer proyecto</a></li>
<li><a class="" href="control.html"><span class="header-section-number">5</span> Estructuras de control</a></li>
<li><a class="" href="datos.html"><span class="header-section-number">6</span> Tipos de datos II: datos estructurados</a></li>
<li><a class="" href="importar-exportar.html"><span class="header-section-number">7</span> Importando/exportando</a></li>
<li class="book-part">Listas y funciones</li>
<li><a class="" href="otros-datos.html"><span class="header-section-number">8</span> Listas y factores</a></li>
<li><a class="" href="funciones.html"><span class="header-section-number">9</span> Creación de funciones</a></li>
<li class="book-part">Alto en el camino</li>
<li><a class="" href="resumen-1.html"><span class="header-section-number">10</span> ¿Qué sabemos hacer?</a></li>
<li class="book-part">DATAVIZ: introducción a la visualización</li>
<li><a class="" href="procesamiento.html"><span class="header-section-number">11</span> Tidy data: ordenando datos</a></li>
<li><a class="" href="tidyverse.html"><span class="header-section-number">12</span> Transformando los datos: incursión al universo tidyverse</a></li>
<li><a class="" href="modelos_lineales.html"><span class="header-section-number">13</span> Introducción a los modelos lineales</a></li>
<li><a class="" href="ggplot2.html"><span class="header-section-number">14</span> Visualizando datos: incursión a ggplot2</a></li>
<li class="book-part">Epílogo</li>
<li><a class="" href="contribuye.html"><span class="header-section-number">15</span> Contribuye al proyecto</a></li>
<li><a class="" href="bibliograf%C3%ADa.html">Bibliografía</a></li>
</ul>

        <div class="book-extra">
          <p><a id="book-repo" href="https://github.com/dadosdelaplace/cursoR_intro_2021_2022">View book source <i class="fab fa-github"></i></a></p>
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="vectores" class="section level1">
<h1>
<span class="header-section-number">Capítulo 3</span> Tipos de datos I: vectores<a class="anchor" aria-label="anchor" href="#vectores"><i class="fas fa-link"></i></a>
</h1>
<div class="rmdimportant">
<p><strong><span style="color: #20935E;">CONSEJO: recuperar un comando y autocompletar</span></strong></p>
<p>Si haces click con el ratón en la consola y pulsas la flecha «arriba» del teclado, te irá apareciendo todo el <strong>historial de órdenes ejecutadas</strong>. Es una manera de ahorrar tiempo para ejecutar órdenes similares a las ya ejecutadas. Si empiezas a escribir el nombre de una variable pero no te acuerdas exactamente de su nombre, pulsando <strong>tabulador</strong> te <strong>autocompletará</strong> solo.</p>
</div>
<p>Bien, ya controlamos la calculadora. Vamos a ir más allá: ¿y si en lugar de tener un solo número tenemos un <strong>CONJUNTO de elementos</strong>? En este capítulo vamos a ver un clásico de cualquier lenguaje de programación: los <strong>vectores o arrays</strong>.</p>
<div id="vectores-numéricos" class="section level2">
<h2>
<span class="header-section-number">3.1</span> Vectores numéricos<a class="anchor" aria-label="anchor" href="#vectores-num%C3%A9ricos"><i class="fas fa-link"></i></a>
</h2>
<div class="rmdnote">
<p>Un conjunto de elementos del mismo tipo se llama <strong><span style="color: #4197D2;">vector</span></strong> (en este caso de números), y de hecho un número individual (por ejemplo, <code>1</code>) es en realidad un vector de longitud uno (un solo elemento).</p>
</div>
<p>La forma más sencilla de <strong>crear un vector</strong> en <code>R</code> es con el comando <code><a href="https://rdrr.io/r/base/c.html">c()</a></code> (de <strong>concatenar elementos</strong>), y basta con introducir sus elementos entre paréntesis, y separados por comas. Vamos a crear el vector con los tres primeros números naturales pares (el 0 no es natural, no seas bárbaro/a).</p>
<div class="sourceCode" id="cb33"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">z</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">4</span>, <span class="fl">6</span><span class="op">)</span>
<span class="va">z</span></code></pre></div>
<pre><code>## [1] 2 4 6</code></pre>
<p>Como ves ahora en el <strong>environment tenemos una colección de elementos</strong>, tres en concreto, guardados en una misma variable <code>z</code>. La longitud de un vector se puede calcular con el comando <code><a href="https://rdrr.io/r/base/length.html">length()</a></code> (nos devolverá el número de elementos de la variable que le pasemos como argumento).</p>
<div class="sourceCode" id="cb35"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/length.html">length</a></span><span class="op">(</span><span class="va">z</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] 3</code></pre>
<p>Además podemos <strong>concatenar a su vez vectores</strong>: vamos a concatenar el vector <code>z</code> consigo mismo, y añadiéndole al final un 8.</p>
<div class="sourceCode" id="cb37"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">z</span>, <span class="va">z</span>, <span class="fl">8</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] 2 4 6 2 4 6 8</code></pre>
<p>Esta última concatenación lo que nos ha dado son, primero, los tres pares que ya teníamos en <code>z</code>, después de nuevo los tres primeros pares, y por último un 8.</p>
</div>
<div id="secuencias-con-un-patrón" class="section level2">
<h2>
<span class="header-section-number">3.2</span> Secuencias con un patrón<a class="anchor" aria-label="anchor" href="#secuencias-con-un-patr%C3%B3n"><i class="fas fa-link"></i></a>
</h2>
<p>Muchas veces nos gustaría <strong>crear vectores de una forma mucho más rápida</strong>. Supongamos que queremos el vector de los primeros 21 números naturales. Si construyéramos el vector como antes, tendríamos que ejecutar el comando <code><a href="https://rdrr.io/r/base/c.html">c(1, 2, 3, 4, 5, ...)</a></code> hasta llegar al número 21. ¿Un poco largo, no?</p>
<p>Hay un atajo: el comando <code><a href="https://rdrr.io/r/base/seq.html">seq()</a></code> nos permite crear una <strong>secuencia desde un elemento inicial hasta un elemento final, avanzando de uno en uno</strong>.</p>
<div class="sourceCode" id="cb39"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/seq.html">seq</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">21</span><span class="op">)</span> <span class="co"># secuencia desde 1 hasta 21 de uno en uno</span></code></pre></div>
<pre><code>##  [1]  1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21</code></pre>
<p>Es importante que no perdamos el foco de que <strong>programar es similar a escribir en un idioma</strong>, por lo que si hay algo que se puede decir de una forma más limpia y que se entienda mejor, ¿por qué no usarlo? Siempre que queramos definir secuencias entre dos números naturales (por ejemplo, entre <code>1</code> y un valor <code>n</code>), cuya distancia entre elementos consecutivos sea uno, el comando <code>1:n</code> nos devuelve lo mismo que la orden <code><a href="https://rdrr.io/r/base/seq.html">seq(1, n)</a></code>. Además, si el elemento inicial es mayor que el final, <code>R</code> entenderá solo que la secuencia la queremo decreciente.</p>
<div class="sourceCode" id="cb41"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">n</span> <span class="op">&lt;-</span> <span class="fl">21</span>
<span class="fl">1</span><span class="op">:</span><span class="va">n</span> <span class="co"># secuencia desde 1 hasta n (21) de uno en uno</span></code></pre></div>
<pre><code>##  [1]  1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21</code></pre>
<div class="sourceCode" id="cb43"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">n</span><span class="op">:</span><span class="fl">1</span> <span class="co"># secuencia decreciente</span></code></pre></div>
<pre><code>##  [1] 21 20 19 18 17 16 15 14 13 12 11 10  9  8  7  6  5  4  3  2  1</code></pre>
<p> </p>
<p>También podemos definir <strong>otro tipo de distancia entre dos elementos consecutivos</strong> (conocido como <strong>paso de discretización</strong>), por ejemplo de 0.5 en 0.5.</p>
<div class="sourceCode" id="cb45"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/seq.html">seq</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">10</span>, by <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span> <span class="co"># secuencia desde 1 a 10 de 0.5 en 0.5</span></code></pre></div>
<pre><code>##  [1]  1.0  1.5  2.0  2.5  3.0  3.5  4.0  4.5  5.0  5.5  6.0  6.5  7.0  7.5  8.0
## [16]  8.5  9.0  9.5 10.0</code></pre>
<p>Otras veces nos interesará definir una secuencia entre un valor inicial y un valor final, pero nos da igual la distancia entre cada elemento: solo nos importa que tenga un número concreto de elementos (y que sea <code>R</code> el que decida la distancia entre elementos consecutivos para conseguirlo).</p>
<div class="sourceCode" id="cb47"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/seq.html">seq</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">50</span>, l <span class="op">=</span> <span class="fl">11</span><span class="op">)</span> <span class="co"># secuencia desde 1 a 50 de longitud 11</span></code></pre></div>
<pre><code>##  [1]  1.0  5.9 10.8 15.7 20.6 25.5 30.4 35.3 40.2 45.1 50.0</code></pre>
<p> </p>
<p>Otro atajo que podemos usar para definir secuencias de números con un patrón es definir <strong>vectores repetidos</strong>, por ejemplo un vector lleno de ceros. La función <code><a href="https://rdrr.io/r/base/rep.html">rep()</a></code> nos permite repetir un elemento un número fijado de veces.</p>
<div class="sourceCode" id="cb49"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">7</span><span class="op">)</span> <span class="co"># vector de 7 ceros</span></code></pre></div>
<pre><code>## [1] 0 0 0 0 0 0 0</code></pre>
<p>No solo podemos repetir un número sino que podemos repetir vectores enteros.</p>
<div class="sourceCode" id="cb51"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">1</span>, <span class="fl">2</span><span class="op">)</span>, <span class="fl">4</span><span class="op">)</span> <span class="co"># repetimos el vector c(0, 1, 2) 4 veces</span></code></pre></div>
<pre><code>##  [1] 0 1 2 0 1 2 0 1 2 0 1 2</code></pre>
<p>Esa repetición además podemos definirla también de forma <strong>intercalada</strong>: en lugar de repetir <code><a href="https://rdrr.io/r/base/c.html">c(0, 1, 2)</a></code> cuatro veces seguidas, queremos cuatro 0, después cuatro 1, y después cuatro 2.</p>
<div class="sourceCode" id="cb53"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">1</span>, <span class="fl">2</span><span class="op">)</span>, each <span class="op">=</span> <span class="fl">4</span><span class="op">)</span> <span class="co"># cuatro 0, luego cuatro 1, luego cuatro 2</span></code></pre></div>
<pre><code>##  [1] 0 0 0 0 1 1 1 1 2 2 2 2</code></pre>
</div>
<div id="operaciones-aritméticas-con-vectores-numéricos" class="section level2">
<h2>
<span class="header-section-number">3.3</span> Operaciones aritméticas con vectores numéricos<a class="anchor" aria-label="anchor" href="#operaciones-aritm%C3%A9ticas-con-vectores-num%C3%A9ricos"><i class="fas fa-link"></i></a>
</h2>
<p>Hemos dicho que un número es un vector de longitud 1, así que <strong>toda operación aritmética</strong> que podamos hacer con un número la vamos a poder a hacer con un vector de números, de forma que si hacemos por ejemplo la operación <code>2 * z</code>, lo que sucederá es que <strong>CADA ELEMENTO del vector</strong> será multiplicado por 2.</p>
<p>De la misma manera se pueden definir sumas <code>z + x</code>, raíces cuadradas <code><a href="https://rdrr.io/r/base/MathFun.html">sqrt(z)</a></code> o elevar cada elemento al cuadrado <code>z^2</code>.</p>
<div class="sourceCode" id="cb55"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Multiplicamos por 2 a CADA ELEMENTO del vector</span>
<span class="va">z</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">4</span>, <span class="fl">6</span><span class="op">)</span>
<span class="fl">2</span> <span class="op">*</span> <span class="va">z</span></code></pre></div>
<pre><code>## [1]  4  8 12</code></pre>
<div class="sourceCode" id="cb57"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Sumamos 3 a CADA ELEMENTO DEL VECTOR</span>
<span class="va">z</span> <span class="op">+</span> <span class="fl">3</span></code></pre></div>
<pre><code>## [1] 5 7 9</code></pre>
<div class="sourceCode" id="cb59"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Hacemos la raíz cuadrada de CADA ELEMENTO DEL VECTOR</span>
<span class="fu"><a href="https://rdrr.io/r/base/MathFun.html">sqrt</a></span><span class="op">(</span><span class="va">z</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] 1.414214 2.000000 2.449490</code></pre>
<div class="sourceCode" id="cb61"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Elevamos al cuadrado CADA ELEMENTO DEL VECTOR</span>
<span class="va">z</span><span class="op">^</span><span class="fl">2</span></code></pre></div>
<pre><code>## [1]  4 16 36</code></pre>
<div class="rmdimportant">
<p><strong><span style="color: #20935E;">CONSEJO</span></strong></p>
<p>Esto último es bastante importante que no se te olvide ya que en otros lenguajes no siempre es así. En <code>R</code>, salvo que especifiquemos lo contrario, <strong>toda operación ARITMÉTICA que hagas a un vector será elemento a elemento</strong>: si multiplicas dos matrices, la operación la realizará elemento a elemento, no como una multiplicación matricial.</p>
</div>
<p>Dado que la operación (por ejemplo, una suma) se realiza elemento a elemento, <strong>¿qué sucederá si sumamos dos vectores de distinta longitud?</strong> Prueba a definir un vector con los 4 primeros impares, e intentar hacer la suma <code>z + y</code> (un vector de longitud 3 más un vector de longitud 4).</p>
<div class="sourceCode" id="cb63"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">y</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">3</span>, <span class="fl">5</span>, <span class="fl">7</span><span class="op">)</span>
<span class="va">z</span> <span class="op">+</span> <span class="va">y</span></code></pre></div>
<pre><code>## [1]  3  7 11  9</code></pre>
<p><code>R</code> intenta molestarte lo menos posible, así que lo que hace es reciclar: si tiene un vector de 4 elementos y le intentas sumar uno de 3 elementos, lo que hará será <strong>reciclar</strong> elementos del vector con menor longitud: hará <code>1+2</code>, <code>3+4</code>, <code>5+6</code> pero… <code>7+2</code> (vuelve al primero).</p>
<div class="rmdimportant">
<p><strong><span style="color: #20935E;">CONSEJO: diferencia de conjuntos</span></strong></p>
<p>Una función muy útil para ver las <strong>diferencias entre dos conjuntos</strong> es <code><a href="https://rdrr.io/r/base/sets.html">setdiff()</a></code>, una función que nos devuelve los elementos distintos entre dos conjuntos.</p>
<div class="sourceCode" id="cb65"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">y</span> <span class="op">&lt;-</span> <span class="fl">1</span><span class="op">:</span><span class="fl">10</span>
<span class="va">z</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">3</span>, <span class="fl">7</span>, <span class="fl">10</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/sets.html">setdiff</a></span><span class="op">(</span><span class="va">y</span>, <span class="va">z</span><span class="op">)</span> <span class="co"># Elementos en y que no están en z </span></code></pre></div>
<pre><code>## [1] 2 4 5 6 8 9</code></pre>
</div>
</div>
<div id="operaciones-estadísticas-con-vectores-numéricos" class="section level2">
<h2>
<span class="header-section-number">3.4</span> Operaciones estadísticas con vectores numéricos<a class="anchor" aria-label="anchor" href="#operaciones-estad%C3%ADsticas-con-vectores-num%C3%A9ricos"><i class="fas fa-link"></i></a>
</h2>
<p>Al igual que podemos ejecutar operaciones aritméticas, podemos realizar también <strong>operaciones estadísticas</strong> con los vectores, como calcular su suma (<code><a href="https://rdrr.io/r/base/sum.html">sum()</a></code>), su media (<code><a href="https://rdrr.io/r/base/mean.html">mean()</a></code>), su mediana (<code><a href="https://rdrr.io/r/stats/median.html">median()</a></code>), su suma acumulada (<code><a href="https://rdrr.io/r/base/cumsum.html">cumsum()</a></code> cada elemento lo acumula al anterior) o percentiles (<code>quantiles()</code>).</p>
<div class="sourceCode" id="cb67"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">y</span><span class="op">)</span> <span class="co"># suma</span></code></pre></div>
<pre><code>## [1] 55</code></pre>
<div class="sourceCode" id="cb69"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">y</span><span class="op">)</span> <span class="co"># media</span></code></pre></div>
<pre><code>## [1] 5.5</code></pre>
<div class="sourceCode" id="cb71"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/stats/median.html">median</a></span><span class="op">(</span><span class="va">y</span><span class="op">)</span> <span class="co"># mediana</span></code></pre></div>
<pre><code>## [1] 5.5</code></pre>
<div class="sourceCode" id="cb73"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/cumsum.html">cumsum</a></span><span class="op">(</span><span class="va">y</span><span class="op">)</span> <span class="co"># suma acumulada</span></code></pre></div>
<pre><code>##  [1]  1  3  6 10 15 21 28 36 45 55</code></pre>
<div class="sourceCode" id="cb75"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">y</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">5</span>, <span class="fl">5</span>, <span class="fl">8</span>, <span class="fl">9</span>, <span class="fl">10</span>, <span class="fl">10</span>, <span class="fl">10</span>, <span class="fl">11</span>, <span class="fl">13</span>, <span class="fl">15</span>, <span class="fl">20</span>, <span class="fl">23</span>, <span class="fl">24</span>, <span class="fl">29</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/stats/quantile.html">quantile</a></span><span class="op">(</span><span class="va">y</span>, probs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0.15</span>, <span class="fl">0.3</span>, <span class="fl">0.7</span>, <span class="fl">0.9</span><span class="op">)</span><span class="op">)</span> <span class="co"># Percentiles p15, p30, p70 y p90</span></code></pre></div>
<pre><code>##  15%  30%  70%  90% 
##  5.0  8.5 14.0 23.5</code></pre>
<div class="rmdimportant">
<p><strong><span style="color: #20935E;">CONSEJO</span></strong></p>
<p>Como has podido comprobar, este otro tipo de <strong>operaciones ESTADÍSTICAS no se realizan elemento a elemento</strong>: la media o la suma las realiza tomando todos los elementos del vector.</p>
</div>
<div class="rmdnote">
<ul>
<li>
<strong><span style="color: #4197D2;">Media</span></strong>: medida de centralización que consiste en sumar todos los elementos y dividirlos entre la cantidad de elementos sumados. A pesar de ser la más conocida, la media es <strong>muy poco robusta</strong>: dado un conjunto, si se introducen <strong>valores atípicos o outliers</strong> (valores muy grandes o muy pequeños), la media se perturbar con mucha facilidad. Dado un vector de valores <span class="math inline">\(x = (x_1, \ldots, x_n)\)</span>, se denota como <span class="math inline">\(\overline{x}\)</span>.</li>
</ul>
<p><span class="math display">\[\overline{x} = \frac{\displaystyle \sum_{i=1}^{n}x_i}{n}\]</span></p>
</div>
<div class="rmdnote">
<ul>
<li>
<strong><span style="color: #4197D2;">Mediana</span></strong>: medida de centralización que consiste en, tras ordenar los datos de menor a mayor, quedarnos con el valor que ocupa el medio (deja tantos números por debajo como por encima). Más robusta que la media aunque menos la moda. Dado un vector de valores <span class="math inline">\(x = (x_1, \ldots, x_n)\)</span>, se denota como <span class="math inline">\(Me_x\)</span>.</li>
</ul>
<p><span class="math display">\[Me_x = \displaystyle \arg \min_{x_i} \left\lbrace F_i &gt; 0.5 \right\rbrace, \quad F_i = \frac{\#\left\lbrace x_j \leq x_i \right\rbrace}{n}\]</span></p>
</div>
<div class="rmdnote">
<ul>
<li>
<strong><span style="color: #4197D2;">Moda</span></strong>: medida de centralización que consiste en encontrar el valor más repetido (el valor <em>trending</em>). Es la medida de centralización más robusta. Dado un vector de valores <span class="math inline">\(x = (x_1, \ldots, x_n)\)</span>, se denota como <span class="math inline">\(Mo_x\)</span>.</li>
</ul>
<p><span class="math display">\[Mo_x = \displaystyle \arg \max_{x_i} f_i  , \quad f_i = \frac{\#\left\lbrace x_j = x_i \right\rbrace}{n}\]</span></p>
</div>
</div>
<div id="vectores-de-caracteres-texto" class="section level2">
<h2>
<span class="header-section-number">3.5</span> Vectores de caracteres (texto)<a class="anchor" aria-label="anchor" href="#vectores-de-caracteres-texto"><i class="fas fa-link"></i></a>
</h2>
<p>Un error común es asociar vectores solo a números: un <strong>vector es una colección de elementos del mismo tipo</strong> pero no tienen porque ser necesariamente números. Vamos a crear una frase de ejemplo, un vector de 4 elementos de tipo texto (en <code>R</code> se llaman <code>char</code>): <code>"Mi"</code>, <code>"nombre"</code>, <code>"es"</code> <code>"Javier"</code>.</p>
<p>Como ves las variables de tipo <code>char</code> van entre comillas dobles, ya que es un <strong>cadena de texto</strong>.</p>
<div class="sourceCode" id="cb77"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">mi_nombre</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Mi"</span>, <span class="st">"nombre"</span>, <span class="st">"es"</span>, <span class="st">"Javier"</span><span class="op">)</span>
<span class="va">mi_nombre</span></code></pre></div>
<pre><code>## [1] "Mi"     "nombre" "es"     "Javier"</code></pre>
<p>Ya tenemos nuestro primer vector de texto de longitud 4. Las <strong>cadenas de texto</strong> son un tipo especial de dato, con los que obviamente no podremos hacer operaciones aritméticas como la suma o la media, pero si podemos hacer operaciones propias de cadenas de texto como puede ser la función <code><a href="https://rdrr.io/r/base/paste.html">paste()</a></code>. Dicha función nos permite convertir un vector de 4 palabras en una frase, decidiendo que caracter queremos que vaya entre palabra con el argumento <code>collapse =</code>.</p>
<div class="sourceCode" id="cb79"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste</a></span><span class="op">(</span><span class="va">mi_nombre</span>, collapse <span class="op">=</span> <span class="st">""</span><span class="op">)</span> <span class="co"># todo junto</span></code></pre></div>
<pre><code>## [1] "MinombreesJavier"</code></pre>
<div class="sourceCode" id="cb81"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste</a></span><span class="op">(</span><span class="va">mi_nombre</span>, collapse <span class="op">=</span> <span class="st">" "</span><span class="op">)</span> <span class="co"># separados por un espacio</span></code></pre></div>
<pre><code>## [1] "Mi nombre es Javier"</code></pre>
<div class="sourceCode" id="cb83"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste</a></span><span class="op">(</span><span class="va">mi_nombre</span>, collapse <span class="op">=</span> <span class="st">"."</span><span class="op">)</span> <span class="co"># separados por un punto .</span></code></pre></div>
<pre><code>## [1] "Mi.nombre.es.Javier"</code></pre>
<p>Si queremos pegar los elementos de la cadena de texto sin ningún tipo de caracter, existe una forma más abreviada y limpia de ejecutar la orden <code><a href="https://rdrr.io/r/base/paste.html">paste(mi_nombre, collapse = "")</a></code>, usando la función <code><a href="https://rdrr.io/r/base/paste.html">paste0()</a></code></p>
<div class="sourceCode" id="cb85"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span><span class="op">(</span><span class="va">mi_nombre</span><span class="op">)</span> <span class="co"># todo junto sin nada separando</span></code></pre></div>
<pre><code>## [1] "Mi"     "nombre" "es"     "Javier"</code></pre>
<p>Esta función es muy útil si queremos definir variables de texto que compartan por ejemplo un prefijo (<code>variable_1</code>, <code>variable_2</code>, …)</p>
<div class="sourceCode" id="cb87"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span><span class="op">(</span><span class="st">"variable"</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">7</span><span class="op">)</span> <span class="co"># a la palabra «variable» le pegamos los números del 1 al 7</span></code></pre></div>
<pre><code>## [1] "variable1" "variable2" "variable3" "variable4" "variable5" "variable6"
## [7] "variable7"</code></pre>
<div class="sourceCode" id="cb89"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste</a></span><span class="op">(</span><span class="st">"variable"</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">7</span>, sep <span class="op">=</span> <span class="st">"_"</span><span class="op">)</span> <span class="co"># separado por una barra baja</span></code></pre></div>
<pre><code>## [1] "variable_1" "variable_2" "variable_3" "variable_4" "variable_5"
## [6] "variable_6" "variable_7"</code></pre>
<div id="paquete-glue" class="section level3">
<h3>
<span class="header-section-number">3.5.1</span> Paquete glue<a class="anchor" aria-label="anchor" href="#paquete-glue"><i class="fas fa-link"></i></a>
</h3>
<p>Otra <strong>forma más intuitiva de trabajar con textos y variables numéricas</strong> es usar el paquete <a href="https://github.com/tidyverse/glue">glue</a>, que nos permite pegar cadenas de texto a variables numéricas de <strong>forma simbólica</strong>.</p>
<div class="sourceCode" id="cb91"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span><span class="op">(</span><span class="st">"glue"</span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/tidyverse/glue">glue</a></span><span class="op">)</span></code></pre></div>
<div class="sourceCode" id="cb92"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">edad</span> <span class="op">&lt;-</span> <span class="fl">10</span><span class="op">:</span><span class="fl">15</span> <span class="co"># edades</span>
<span class="fu"><a href="https://rdrr.io/pkg/glue/man/glue.html">glue</a></span><span class="op">(</span><span class="st">"La edad es de {edad} años"</span><span class="op">)</span></code></pre></div>
<pre><code>## La edad es de 10 años
## La edad es de 11 años
## La edad es de 12 años
## La edad es de 13 años
## La edad es de 14 años
## La edad es de 15 años</code></pre>
<p>También podemos hacer uso de dicha función sin tener los valores numéricos previamente guardados en variables.</p>
<div class="sourceCode" id="cb94"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Otra forma sin definir variables a priori</span>
<span class="fu"><a href="https://rdrr.io/pkg/glue/man/glue.html">glue</a></span><span class="op">(</span><span class="st">"La edad es de {10:15} años"</span><span class="op">)</span></code></pre></div>
<pre><code>## La edad es de 10 años
## La edad es de 11 años
## La edad es de 12 años
## La edad es de 13 años
## La edad es de 14 años
## La edad es de 15 años</code></pre>
<p>Ya sabemos trabajar con textos :)</p>
<p>¿Y si queremos <strong>pasar todo a mayúscula</strong>? ¿O <strong>todo a minúscula</strong>? ¿Y si queremos <strong>sustituir un caracter (por ejemplo <code>.</code>) por otro en todos los elementos</strong>? <code>R</code> también nos proporciona algunas funciones muy sencillas (del paquete <code>{base}</code>) de usar para dichas tareas. Aquí un ejemplo de algunas de ellas.</p>
<div class="sourceCode" id="cb96"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">texto</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Hola."</span>, <span class="st">"qué"</span>, <span class="st">"ase?"</span>, <span class="st">"todo"</span>, <span class="st">"bien."</span>, <span class="st">"y yo"</span>,
           <span class="st">"que"</span>, <span class="st">"ME"</span>, <span class="st">"ALEGRO"</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/chartr.html">toupper</a></span><span class="op">(</span><span class="va">texto</span><span class="op">)</span> <span class="co"># todo a mayúscula</span></code></pre></div>
<pre><code>## [1] "HOLA."  "QUÉ"    "ASE?"   "TODO"   "BIEN."  "Y YO"   "QUE"    "ME"    
## [9] "ALEGRO"</code></pre>
<div class="sourceCode" id="cb98"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/chartr.html">tolower</a></span><span class="op">(</span><span class="va">texto</span><span class="op">)</span> <span class="co"># todo a minúscula</span></code></pre></div>
<pre><code>## [1] "hola."  "qué"    "ase?"   "todo"   "bien."  "y yo"   "que"    "me"    
## [9] "alegro"</code></pre>
<p>El paquete <code>{base}</code> también nos permite buscar y reemplazar patrones concretos en cadenas de texta (por ejemplo, sustituir toda letra «o» por el caracter «*»).</p>
<div class="sourceCode" id="cb100"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/grep.html">gsub</a></span><span class="op">(</span><span class="st">"o"</span>, <span class="st">"*"</span>, <span class="va">texto</span><span class="op">)</span> <span class="co"># toda "o" en el texto será sustituida por *</span></code></pre></div>
<pre><code>## [1] "H*la."  "qué"    "ase?"   "t*d*"   "bien."  "y y*"   "que"    "ME"    
## [9] "ALEGRO"</code></pre>
<p>Dentro del entorno de paquetes <a href="https://tidyverse.tidyverse.org">tidyverse</a>, el paquete <a href="http://stringr.tidyverse.org">stringr</a> permite un manejo más complejo de cadenas de texo (como el uso de expresiones regulares).</p>
<div class="figure">
<span style="display:block;" id="fig:stringr2"></span>
<img src="img/stringr.png" alt="Paquete stringr para manejar cadenas de texto más complejas" width="615"><p class="caption">
Imagen/gráfica 3.1: Paquete stringr para manejar cadenas de texto más complejas
</p>
</div>
<div class="inline-table"><table class="table table-sm">
<caption>
<span id="tab:unnamed-chunk-48">Tabla 3.1: </span>Paquetes mencionados hasta ahora</caption>
<thead><tr class="header">
<th align="left">paquetes</th>
<th align="left">descripción</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">{base}</td>
<td align="left">utilidades básicas</td>
</tr>
<tr class="even">
<td align="left">{bookdown}</td>
<td align="left">creación de libros, manuales e informes en R</td>
</tr>
<tr class="odd">
<td align="left">{glue}</td>
<td align="left">manejo de texto literal</td>
</tr>
<tr class="even">
<td align="left">{stringr}</td>
<td align="left">manejo complejo de cadenas de texto</td>
</tr>
</tbody>
</table></div>
</div>
</div>
<div id="vectores-lógicos-truefalse" class="section level2">
<h2>
<span class="header-section-number">3.6</span> Vectores lógicos (TRUE/FALSE)<a class="anchor" aria-label="anchor" href="#vectores-l%C3%B3gicos-truefalse"><i class="fas fa-link"></i></a>
</h2>
<ul>
<li>[X] Variables numéricas (individuales)</li>
<li>[X] Vectores de números</li>
<li>[X] Vectores de caracteres</li>
<li>[ ] Vectores lógicos</li>
</ul>
<p>Veamos un último tipo de vectores importante en todo lenguaje de programación: los <strong>vectores lógicos</strong>. Un <strong>valor lógico</strong> puede tomar tres valores:</p>
<ul>
<li>
<code>TRUE</code> (guardado internamente como un <code>1</code>).</li>
<li>
<code>FALSE</code> (guardado internamente como un <code>0</code>).</li>
<li>
<code>NA</code> (dato ausente, son las siglas de <em>not available</em>, cuando pretendemos aplicar una comparación a un dato ya de por si ausente).</li>
</ul>
<p>Estos valores son resultado de evaluar <strong>condiciones lógicas</strong>. Por ejemplo, imaginemos que definimos un vector de números <code>x &lt;- c(1.5, -1, 2, 4, 3, -4)</code>. ¿Qué numeros del vector son menores que 2? Basta con que ejecutemos la orden <code>x &lt; 2</code>, que nos devolverá <code>TRUE/FALSE</code> en cada hueco, en función de si cumple (<code>TRUE</code>) o no (<code>FALSE</code>) la condición pedida.</p>
<div class="sourceCode" id="cb102"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1.5</span>, <span class="op">-</span><span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">4</span>, <span class="fl">3</span>, <span class="op">-</span><span class="fl">4</span><span class="op">)</span>
<span class="va">x</span> <span class="op">&lt;</span> <span class="fl">2</span></code></pre></div>
<pre><code>## [1]  TRUE  TRUE FALSE FALSE FALSE  TRUE</code></pre>
<p>El primer, segundo y sexto elemento del vector son los únicos elementos (estrictamente) menores que <code>2</code>, de ahí que en el primer, segundo y sexto elemento aparezca un <code>TRUE</code> y en el resto un <code>FALSE</code>. Es <strong>importante</strong> recordar que al <strong>evaluar una condición lógica sobre un vector</strong> de longitud <code>n</code>, la <strong>salida sigue siendo un vector</strong> de longitud <code>n</code> pero con valores lógicos.</p>
<p>Dicha condición lógica puede hacerse con otros operadores como <code><a href="https://rdrr.io/r/base/Comparison.html">&lt;=</a></code>, <code><a href="https://rdrr.io/r/base/Comparison.html">&gt;</a></code> o <code><a href="https://rdrr.io/r/base/Comparison.html">&gt;=</a></code>.</p>
<div class="sourceCode" id="cb104"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">x</span> <span class="op">&lt;=</span> <span class="fl">2</span></code></pre></div>
<pre><code>## [1]  TRUE  TRUE  TRUE FALSE FALSE  TRUE</code></pre>
<div class="sourceCode" id="cb106"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">x</span> <span class="op">&gt;</span> <span class="fl">2</span></code></pre></div>
<pre><code>## [1] FALSE FALSE FALSE  TRUE  TRUE FALSE</code></pre>
<div class="sourceCode" id="cb108"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">x</span> <span class="op">&gt;=</span> <span class="fl">2</span></code></pre></div>
<pre><code>## [1] FALSE FALSE  TRUE  TRUE  TRUE FALSE</code></pre>
<p> </p>
<p>También podemos <strong>comparar si es igual a otro elemento</strong>, para lo que usaremos el operador <code><a href="https://rdrr.io/r/base/Comparison.html">==</a></code>, pudiendo usar también su opuesto <code><a href="https://rdrr.io/r/base/Comparison.html">!=</a></code> («distinto de»).</p>
<div class="sourceCode" id="cb110"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">x</span> <span class="op">==</span> <span class="fl">2</span></code></pre></div>
<pre><code>## [1] FALSE FALSE  TRUE FALSE FALSE FALSE</code></pre>
<div class="sourceCode" id="cb112"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">x</span> <span class="op">!=</span> <span class="fl">2</span></code></pre></div>
<pre><code>## [1]  TRUE  TRUE FALSE  TRUE  TRUE  TRUE</code></pre>
<p>Las <strong>condiciones pueden ser combinadas</strong>, principalmente de dos maneras:</p>
<ul>
<li><p><strong>Intersección</strong>: todas las condiciones concatenadas se deben cumplir (conjunción <code>y</code>, operador <code><a href="https://rdrr.io/r/base/Logic.html">&amp;</a></code>) para devolver un <code>TRUE</code>.</p></li>
<li><p><strong>Unión</strong>: basta con que una de las condiciones concatenadas se cumpla (conjunción <code>o</code>, operador <code><a href="https://rdrr.io/r/base/Logic.html">|</a></code>) para devolver un <code>TRUE</code>.</p></li>
</ul>
<p>Por ejemplo, vamos a calcular qué elementos del vector <code><a href="https://rdrr.io/r/base/c.html">c(1.5, -1, 2, 4, 3, -4)</a></code> sean menores que 3 pero (y) mayores que 0, y los elementos menores que 2 o mayores que 3.</p>
<div class="sourceCode" id="cb114"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1.5</span>, <span class="op">-</span><span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">4</span>, <span class="fl">3</span>, <span class="op">-</span><span class="fl">4</span><span class="op">)</span>
<span class="va">x</span> <span class="op">&lt;</span> <span class="fl">3</span> <span class="op">&amp;</span> <span class="va">x</span> <span class="op">&gt;</span> <span class="fl">0</span> <span class="co"># Solo los que cumplen ambas condiciones</span></code></pre></div>
<pre><code>## [1]  TRUE FALSE  TRUE FALSE FALSE FALSE</code></pre>
<div class="sourceCode" id="cb116"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">x</span> <span class="op">&lt;</span> <span class="fl">2</span> <span class="op">|</span> <span class="va">x</span> <span class="op">&gt;</span> <span class="fl">3</span> <span class="co"># Los cumplen al menos una de ellas</span></code></pre></div>
<pre><code>## [1]  TRUE  TRUE FALSE  TRUE FALSE  TRUE</code></pre>
<p>Como hemos comentado anteriormente, los valores lógicos <code>TRUE/FALSE</code> son guardados internamente como <code>0/1</code> por lo que podemos usar <strong>operaciones aritméticas con ellos</strong>. Por ejemplo, si queremos averiguar el número de elementos de un vector que cumplen una condición lógica <code>&lt; 2</code>, los que lo hagan tendrán asignado un <code>1</code> y los que no un <code>0</code>, por lo que basta con sumar el vector lógico para obtener el número de elementos bajo dicha condición.</p>
<div class="sourceCode" id="cb118"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">x</span> <span class="op">&lt;</span> <span class="fl">2</span><span class="op">)</span> <span class="co"># sumamos el vector de TRUE/FALSE --&gt; número de TRUE</span></code></pre></div>
<pre><code>## [1] 3</code></pre>
</div>
<div id="ausentes" class="section level2">
<h2>
<span class="header-section-number">3.7</span> Datos ausentes: NA y NaN<a class="anchor" aria-label="anchor" href="#ausentes"><i class="fas fa-link"></i></a>
</h2>
<p>La vida no siempre es perfecta así que en muchas ocasiones nos encontraremos con lo que llamamos en estadística un <strong>dato ausente o <em>missing value</em></strong>, un <strong>valor que no tenemos en nuestra variable</strong>, y un ejemplo práctico lo tenemos con los datos de vacunación de covid del Ministerio de Sanidad que hemos tenido en 2020-2021. Cada día se publicaba un PDF (ya…mal) con los datos de vacunación PERO…no se publican datos los fines de semana: en dichas fechas hay datos que no tenemos, y en <code>R</code> se representan por <code>NA</code> (significa <em>not available</em>).</p>
<div id="na-not-available" class="section level3">
<h3>
<span class="header-section-number">3.7.1</span> NA: not available<a class="anchor" aria-label="anchor" href="#na-not-available"><i class="fas fa-link"></i></a>
</h3>
<p>Vamos a crear un vector de números con datos ausentes con la orden <code>x &lt;- c(1, NA, 3, NA, NA, 5, 6)</code>: el vector tendrá longitud 7 pero en el segundo, cuarto y quinto elemento tendremos un dato faltante, un lugar que no tenemos relleno (pero que no eliminamos).</p>
<div class="sourceCode" id="cb120"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="cn">NA</span>, <span class="fl">3</span>, <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="fl">5</span>, <span class="fl">6</span><span class="op">)</span> <span class="co"># Vector numérico con datos faltante</span>
<span class="fu"><a href="https://rdrr.io/r/base/length.html">length</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="co"># longitud del vector</span></code></pre></div>
<pre><code>## [1] 7</code></pre>
<div class="sourceCode" id="cb122"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">x</span></code></pre></div>
<pre><code>## [1]  1 NA  3 NA NA  5  6</code></pre>
<p><strong>¿Puedes aventurar que sucede cuando multiplicamos ese vector por 2 por ejemplo?</strong></p>
<div class="sourceCode" id="cb124"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fl">2</span> <span class="op">*</span> <span class="va">x</span> <span class="co"># operación aritmética con un vector con NA</span></code></pre></div>
<pre><code>## [1]  2 NA  6 NA NA 10 12</code></pre>
<div class="rmdwarning">
<p>Un dato que no tenemos, multiplicado por 2, sigue siendo un dato ausente. Es muy importante para evitar resultados erróneos que entendamos que un <strong>dato ausente no computa en una operación aritmética, es un hueco vacío</strong>. Si hacemos la suma del vector, estamos sumando números más datos ausentes, por lo que el resultado final será también un dato ausente. Si tenemos algún dato ausente en nuestro vector, la suma final está a su vez ausente, ¡no podemos saber cuánto vale!</p>
<div class="sourceCode" id="cb126"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="co"># suma de un vector que contiene NA</span></code></pre></div>
<pre><code>## [1] NA</code></pre>
</div>
<p>Para evitar que un dato ausente en nuestros datos nos impida hacer ciertas operaciones, en muchas funciones de <code>R</code> podemos añadir el argumento <code>na.rm = TRUE</code>: <strong>primero elimina los datos ausentes</strong>, y luego ejecuta la función.</p>
<div class="sourceCode" id="cb128"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">x</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="co"># eliminando datos ausentes</span></code></pre></div>
<pre><code>## [1] 15</code></pre>
<p>Una manera de <strong>localizar que elementos están ausentes</strong> en nuestras variables es con la función <code><a href="https://rdrr.io/r/base/NA.html">is.na()</a></code>, una función que nos devuelve un vector de valores lógico: <code>TRUE</code> si el elemento está ausente y <code>FALSE</code> si no lo está.</p>
<div class="sourceCode" id="cb130"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="co"># TRUE si está ausente (NA), FALSE si no lo está.</span></code></pre></div>
<pre><code>## [1] FALSE  TRUE FALSE  TRUE  TRUE FALSE FALSE</code></pre>
<p>Dichos <strong>datos ausentes se pueden eliminar</strong> (sin necesidad de sumarlos) con la función <code><a href="https://rdrr.io/r/stats/na.fail.html">na.omit()</a></code> (aunque a veces lo que nos interesa es que no sea ausente, introduciendo el punto medio entre su valor anterior y su valor posterior, por ejemplo).</p>
<div class="sourceCode" id="cb132"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/stats/na.fail.html">na.omit</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] 1 3 5 6
## attr(,"na.action")
## [1] 2 4 5
## attr(,"class")
## [1] "omit"</code></pre>
</div>
<div id="nan-not-a-number" class="section level3">
<h3>
<span class="header-section-number">3.7.2</span> NaN: not a number<a class="anchor" aria-label="anchor" href="#nan-not-a-number"><i class="fas fa-link"></i></a>
</h3>
<p>Hay un <strong>tipo de dato muy particular, como resultado de operaciones no permitidas o cuyo resultado es indeterminado</strong>, que en <code>R</code> lo veremos como <code>NaN</code>: <em>not a number</em>, un resultado fruto de una indeterminación, como por ejemplo la operación <code>0/0</code> (cuyo límite no está definido). Importante saber que también existe una forma de denotar al infinito como <code>Inf</code>, siendo el resultado de algunas operaciones como <code>1/0</code>.</p>
<div class="sourceCode" id="cb134"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fl">1</span><span class="op">/</span><span class="fl">0</span></code></pre></div>
<pre><code>## [1] Inf</code></pre>
<div class="sourceCode" id="cb136"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fl">0</span><span class="op">/</span><span class="fl">0</span></code></pre></div>
<pre><code>## [1] NaN</code></pre>
<p>De la misma manera que podemos localizar valores <code>NA</code>, tenemos a nuestra disposición las funciones <code>is.infinte()</code> y <code><a href="https://rdrr.io/r/base/is.finite.html">is.nan()</a></code> para detectar que elementos de nuestro vector son <code>Inf</code> o <code>NaN</code>, respectivamente.</p>
<div class="sourceCode" id="cb138"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="cn">NA</span>, <span class="fl">3</span>, <span class="fl">4</span>, <span class="cn">Inf</span>, <span class="fl">6</span>, <span class="fl">7</span>, <span class="cn">Inf</span>, <span class="cn">NaN</span>, <span class="cn">NA</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span></code></pre></div>
<pre><code>##  [1] FALSE  TRUE FALSE FALSE FALSE FALSE FALSE FALSE  TRUE  TRUE</code></pre>
<div class="sourceCode" id="cb140"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/is.finite.html">is.nan</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span></code></pre></div>
<pre><code>##  [1] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE  TRUE FALSE</code></pre>
<div class="sourceCode" id="cb142"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/is.finite.html">is.infinite</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span></code></pre></div>
<pre><code>##  [1] FALSE FALSE FALSE FALSE  TRUE FALSE FALSE  TRUE FALSE FALSE</code></pre>
</div>
</div>
<div id="seleccionar-elementos-de-un-vector" class="section level2">
<h2>
<span class="header-section-number">3.8</span> Seleccionar elementos de un vector<a class="anchor" aria-label="anchor" href="#seleccionar-elementos-de-un-vector"><i class="fas fa-link"></i></a>
</h2>
<p>Ya sabemos definir variables que sean vectores (recuerda: colección de valores del mismo tipo). ¿Y si del <strong>vector original queremos EXTRAER UN SUBCONJUNTO del mismo</strong>, por ejemplo, los primeros 10 elementos?</p>
<p><code>R</code> tiene varias formas de hacer esto pero la más sencilla es entendiendo que si yo quiero <strong>acceder al elemento i</strong> de un vector, deberé usar el <strong>operador de selección <code>[i]</code></strong>. Veamos un ejemplo</p>
<div class="sourceCode" id="cb144"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">x</span> <span class="op">&lt;-</span> <span class="fl">1</span><span class="op">:</span><span class="fl">100</span> <span class="co"># Vector de longitud 100 (del 1 al 100)</span>
<span class="va">y</span> <span class="op">&lt;-</span> <span class="va">x</span><span class="op">[</span><span class="fl">37</span><span class="op">]</span> <span class="co"># Solo me interesa el elemento que ocupa el lugar 37</span>
<span class="va">y</span></code></pre></div>
<pre><code>## [1] 37</code></pre>
<p>Dado que hemos visto que un número no es más que un vector de longitud uno, esta operación también la podemos aplicar usando un vector de índices a seleccionar, de forma que le podemos indicar simultaneamente que valores que queremos</p>
<div class="sourceCode" id="cb146"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">x</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">4</span>, <span class="fl">51</span>, <span class="fl">77</span><span class="op">)</span><span class="op">]</span> <span class="co"># Solo queremos acceder a los elementos en la posición 1, 4, 51, y 77</span></code></pre></div>
<pre><code>## [1]  1  4 51 77</code></pre>
<div class="sourceCode" id="cb148"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">y</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"hola"</span>, <span class="st">"qué"</span>, <span class="st">"tal"</span>, <span class="st">"todo"</span>, <span class="st">"ok"</span>, <span class="st">"?"</span><span class="op">)</span>
<span class="va">y</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">2</span><span class="op">]</span> <span class="co"># Solo queremos acceder a los elementos en la posición 1 y 2</span></code></pre></div>
<pre><code>## [1] "hola" "qué"</code></pre>
<div class="sourceCode" id="cb150"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">2</span>, <span class="fu"><a href="https://rdrr.io/r/base/length.html">length</a></span><span class="op">(</span><span class="va">y</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] 1 2 6</code></pre>
<div class="sourceCode" id="cb152"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">y</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">2</span>, <span class="fu"><a href="https://rdrr.io/r/base/length.html">length</a></span><span class="op">(</span><span class="va">y</span><span class="op">)</span><span class="op">)</span><span class="op">]</span> <span class="co"># Solo accedemos a los elementos en la posición 1, 2 y además el que ocupa la última posición (recuerda: length(y) nos da la longitud total del vector)</span></code></pre></div>
<pre><code>## [1] "hola" "qué"  "?"</code></pre>
<p>Otras veces no querremos seleccionar un elemento en concreto sino <strong>filtrar algunos elementos en concreto y no extraerlos</strong>, para lo cual deberemos repetir la misma operación pero con el signo <code><a href="https://rdrr.io/r/base/Arithmetic.html">-</a></code> delante: el operador <code>[-i]</code> no selecciona el elemento i-ésimo del vector sino que lo elimina en nuestro filtro.</p>
<div class="sourceCode" id="cb154"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">y</span></code></pre></div>
<pre><code>## [1] "hola" "qué"  "tal"  "todo" "ok"   "?"</code></pre>
<div class="sourceCode" id="cb156"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">z</span> <span class="op">&lt;-</span> <span class="va">y</span><span class="op">[</span><span class="op">-</span><span class="fl">2</span><span class="op">]</span> <span class="co"># Nos muestra todo y salvo el elemento que ocupa la segunda posición</span>
<span class="va">z</span></code></pre></div>
<pre><code>## [1] "hola" "tal"  "todo" "ok"   "?"</code></pre>
<p> </p>
<p>Sin embargo, <strong>lo habitual es que dicho filtro lo hagamos en base a una condición lógica</strong>. Supongamos que <code>x &lt;- c(7, 20, 18, 3, 19, 9, 13, 3, 45)</code> y <code>y &lt;- c(17, 21, 58, 33, 15, 59, 13, 1, 45)</code> son las edades de dos grupos de personas y que queremos quedarnos solo con los mayores edad. ¿Tenemos que andar averiguando en que posición se encuentran para luego seleccionarlos? No, vamos a <strong>seleccionar los elementos que cumplen una condición dada</strong>.</p>
<div class="sourceCode" id="cb158"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">7</span>, <span class="fl">20</span>, <span class="fl">18</span>, <span class="fl">3</span>, <span class="fl">19</span>, <span class="fl">9</span>, <span class="fl">13</span>, <span class="fl">3</span>, <span class="fl">45</span><span class="op">)</span>
<span class="va">y</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">17</span>, <span class="fl">21</span>, <span class="fl">58</span>, <span class="fl">33</span>, <span class="fl">15</span>, <span class="fl">59</span>, <span class="fl">13</span>, <span class="fl">1</span>, <span class="fl">45</span><span class="op">)</span>
<span class="va">x</span><span class="op">[</span><span class="va">x</span> <span class="op">&gt;=</span> <span class="fl">18</span><span class="op">]</span> <span class="co"># mayores de 18 años del conjunto x</span></code></pre></div>
<pre><code>## [1] 20 18 19 45</code></pre>
<div class="sourceCode" id="cb160"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">y</span><span class="op">[</span><span class="va">x</span> <span class="op">&gt;=</span> <span class="fl">18</span><span class="op">]</span> <span class="co"># mayores de 18 años del conjunto y</span></code></pre></div>
<pre><code>## [1] 21 58 15 45</code></pre>
<p>Lo que hemos hecho ha sido pasarlo como índices un vector lógico <code>TRUE/FALSE</code>, de forma que solo filtrará los que tengan un <code>TRUE</code> asignado, aquellos que cumplen la condición lógica introducida. Esto también nos puede servir para limpiar de datos ausentes, combinando la función <code><a href="https://rdrr.io/r/base/NA.html">is.na()</a></code>, que nos localiza el lugar que ocupan los ausentes, con el operador <code><a href="https://rdrr.io/r/base/Logic.html">!</a></code>, que lo que hace es negar lo que venga detrás. También podemos probar a <strong>combinar condiciones lógicas para nuestra selección</strong>.</p>
<div class="sourceCode" id="cb162"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">7</span>, <span class="cn">NA</span>, <span class="fl">20</span>, <span class="fl">3</span>, <span class="fl">19</span>, <span class="fl">21</span>, <span class="fl">25</span>, <span class="fl">80</span>, <span class="cn">NA</span><span class="op">)</span>
<span class="va">x</span><span class="op">[</span><span class="va">x</span> <span class="op">&gt;=</span> <span class="fl">18</span><span class="op">]</span> <span class="co"># mayores de 18 años del conjunto x</span></code></pre></div>
<pre><code>## [1] NA 20 19 21 25 80 NA</code></pre>
<div class="sourceCode" id="cb164"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">x</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="op">]</span> <span class="co"># solo valores ausentes</span></code></pre></div>
<pre><code>## [1] NA NA</code></pre>
<div class="sourceCode" id="cb166"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">x</span><span class="op">[</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="op">]</span> <span class="co"># sin valores ausentes: ! es el símbolo de la negación</span></code></pre></div>
<pre><code>## [1]  7 20  3 19 21 25 80</code></pre>
<div class="sourceCode" id="cb168"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="op">!</span><span class="op">(</span><span class="va">x</span> <span class="op">&gt;=</span> <span class="fl">18</span><span class="op">)</span> <span class="co"># niega los mayores de 18 años, todo lo que no cumpla esa condición</span></code></pre></div>
<pre><code>## [1]  TRUE    NA FALSE  TRUE FALSE FALSE FALSE FALSE    NA</code></pre>
<div class="sourceCode" id="cb170"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">x</span><span class="op">[</span><span class="va">x</span> <span class="op">&gt;=</span> <span class="fl">18</span> <span class="op">&amp;</span> <span class="va">x</span> <span class="op">&lt;=</span> <span class="fl">25</span><span class="op">]</span> <span class="co"># los valores que cumplen ambas (&amp;): entre 18 y 25 años</span></code></pre></div>
<pre><code>## [1] NA 20 19 21 25 NA</code></pre>
<p>Como ves si un valor es <code>NA</code>, la evaluación de una condición lógica sobre él (mayor o menor de 18 años) nos seguirá devolviendo <code>NA</code>. Por último, <code>R</code> nos permite <strong>dar significado léxico</strong> a nuestros valores (significan algo, no solo números), pudiendo poner nombres a los elementos de un vector, permitiendo su selección por dichos nombres.</p>
<div class="sourceCode" id="cb172"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"edad"</span> <span class="op">=</span> <span class="fl">31</span>, <span class="st">"tlf"</span> <span class="op">=</span> <span class="fl">613910687</span>, <span class="st">"cp"</span> <span class="op">=</span> <span class="fl">33007</span><span class="op">)</span> <span class="co"># cada número tiene un significado distinto</span>
<span class="va">x</span></code></pre></div>
<pre><code>##      edad       tlf        cp 
##        31 613910687     33007</code></pre>
<div class="sourceCode" id="cb174"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">x</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"edad"</span>, <span class="st">"cp"</span><span class="op">)</span><span class="op">]</span> <span class="co"># seleccionamos los elementos que tienen ese nombre asignado</span></code></pre></div>
<pre><code>##  edad    cp 
##    31 33007</code></pre>
<p>Con la función <code><a href="https://rdrr.io/r/base/names.html">names()</a></code> además podemos, no solo consultar los nombres de una variable, sino cambiarlos a nuestro gusto.</p>
<div class="sourceCode" id="cb176"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/names.html">names</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="co"># Consultamos nombres</span></code></pre></div>
<pre><code>## [1] "edad" "tlf"  "cp"</code></pre>
<div class="sourceCode" id="cb178"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/names.html">names</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"años"</span>, <span class="st">"móvil"</span>, <span class="st">"dirección"</span><span class="op">)</span> <span class="co"># Cambiamos nombres</span>
<span class="fu"><a href="https://rdrr.io/r/base/names.html">names</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="co"># Consultamos nuevos nombres</span></code></pre></div>
<pre><code>## [1] "años"      "móvil"     "dirección"</code></pre>
<div class="sourceCode" id="cb180"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">x</span></code></pre></div>
<pre><code>##      años     móvil dirección 
##        31 613910687     33007</code></pre>
<div class="rmdimportant">
<p><strong><span style="color: #20935E;">CONSEJO: all, any</span></strong></p>
<p>Existen dos funciones muy útiles en <code>R</code> para saber si <strong>TODOS</strong> o <strong>ALGUNO</strong> de los elementos de un vector cumple una condición. Las funciones <code><a href="https://rdrr.io/r/base/all.html">all()</a></code> y <code><a href="https://rdrr.io/r/base/any.html">any()</a></code> nos devolverá un único valor lógico. Estas funciones son muy útiles al final de los códigos para comprobar que las condiciones que tienen que verificar los datos se cumplen, y asegurarnos que el proceso se ha ejecutado correctamente (por ejemplo, que todos los datos sean positivos o no haya datos ausentes).</p>
<div class="sourceCode" id="cb182"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">3</span>, <span class="fl">4</span>, <span class="fl">5</span>, <span class="cn">NA</span>, <span class="fl">7</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/all.html">all</a></span><span class="op">(</span><span class="va">x</span> <span class="op">&lt;</span> <span class="fl">3</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] FALSE</code></pre>
<div class="sourceCode" id="cb184"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/any.html">any</a></span><span class="op">(</span><span class="va">x</span> <span class="op">&lt;</span> <span class="fl">3</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode" id="cb186"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/all.html">all</a></span><span class="op">(</span><span class="va">x</span> <span class="op">&gt;</span> <span class="fl">0</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] NA</code></pre>
<div class="sourceCode" id="cb188"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/all.html">all</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/na.fail.html">na.omit</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">&gt;</span> <span class="fl">0</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode" id="cb190"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/all.html">all</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] FALSE</code></pre>
<div class="sourceCode" id="cb192"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/any.html">any</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
</div>
<div id="which" class="section level3">
<h3>
<span class="header-section-number">3.8.1</span> which<a class="anchor" aria-label="anchor" href="#which"><i class="fas fa-link"></i></a>
</h3>
<p>Hemos visto como seleccionar elementos de un vector que cumplen una condición, para a veces no queremos el elemento en sí, sino el lugar que ocupa: <strong>¿qué valores de un vector cumplen una condición lógica, qué lugar ocupan?</strong> Para obtener dicho índice tenemos a nuestro disposición la función <code><a href="https://rdrr.io/r/base/which.html">which()</a></code>, que no nos devuelve el elemento en sí sino su lugar.</p>
<div class="sourceCode" id="cb194"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">7</span>, <span class="cn">NA</span>, <span class="fl">20</span>, <span class="fl">3</span>, <span class="fl">19</span>, <span class="fl">21</span>, <span class="fl">25</span>, <span class="fl">80</span>, <span class="cn">NA</span><span class="op">)</span>
<span class="va">x</span><span class="op">[</span><span class="va">x</span> <span class="op">&gt;=</span> <span class="fl">18</span><span class="op">]</span> <span class="co"># Accedemos a los elementos que cumplen la condición</span></code></pre></div>
<pre><code>## [1] NA 20 19 21 25 80 NA</code></pre>
<div class="sourceCode" id="cb196"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/which.html">which</a></span><span class="op">(</span><span class="va">x</span> <span class="op">&gt;=</span> <span class="fl">18</span><span class="op">)</span> <span class="co"># Obtenemos los lugares que ocupan los elementos que cumplen la condición</span></code></pre></div>
<pre><code>## [1] 3 5 6 7 8</code></pre>
<p>Esta función es muy útil especialmente cuando queremos <strong>averiguar el valor que ocupa el máximo/mínimo</strong> de una colección de valores, con las funciones <code><a href="https://rdrr.io/r/base/which.min.html">which.max()</a></code> y <code><a href="https://rdrr.io/r/base/which.min.html">which.min()</a></code>.</p>
<div class="sourceCode" id="cb198"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/Extremes.html">max</a></span><span class="op">(</span><span class="va">x</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="co"># máximo de x (si no eliminamos NA, nos devolverá NA)</span></code></pre></div>
<pre><code>## [1] 80</code></pre>
<div class="sourceCode" id="cb200"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/Extremes.html">min</a></span><span class="op">(</span><span class="va">x</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="co"># mínimo de x (si no eliminamos NA, nos devolverá NA)</span></code></pre></div>
<pre><code>## [1] 3</code></pre>
<div class="sourceCode" id="cb202"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/which.min.html">which.max</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="co"># Lugar que ocupa el máximo</span></code></pre></div>
<pre><code>## [1] 8</code></pre>
<div class="sourceCode" id="cb204"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">x</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/which.min.html">which.max</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="op">]</span></code></pre></div>
<pre><code>## [1] 80</code></pre>
<div class="sourceCode" id="cb206"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/which.min.html">which.min</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="co"># Lugar que ocupa el mínimo</span></code></pre></div>
<pre><code>## [1] 4</code></pre>
<div class="sourceCode" id="cb208"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">x</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/which.min.html">which.min</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="op">]</span></code></pre></div>
<pre><code>## [1] 3</code></pre>
</div>
<div id="null" class="section level3">
<h3>
<span class="header-section-number">3.8.2</span> NULL<a class="anchor" aria-label="anchor" href="#null"><i class="fas fa-link"></i></a>
</h3>
<p>A veces veremos que además de <code>NA</code> y <code>NaN</code>, <code>R</code> nos muestra un dato llamado <code>NULL</code>. Cuando tenemos <code>NA</code> en alguna variable, el registro existe, pero no está relleno. Sin embargo, cuando tenemos un <code>NULL</code> significa que ese registro ni siquiera existe: no es un dato guardado pero cuyo valor desconocemos, es un dato que ni siquiera existe (por ejemplo, si guardamos datos de 7 personas, el dato de la octava persona no es <code>NA</code>, es que no hay octava persona directamente).</p>
<div class="sourceCode" id="cb210"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="cn">NA</span>, <span class="fl">3</span>, <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="fl">5</span>, <span class="fl">6</span><span class="op">)</span>
<span class="va">x</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span> <span class="co"># NA: el registro existe pero sin dato</span></code></pre></div>
<pre><code>## [1] NA</code></pre>
<div class="sourceCode" id="cb212"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/names.html">names</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="co"># No hemos definido el nombre de las variables, así que devuelve NULL</span></code></pre></div>
<pre><code>## NULL</code></pre>
</div>
</div>
<div id="ordenar-vectores" class="section level2">
<h2>
<span class="header-section-number">3.9</span> Ordenar vectores<a class="anchor" aria-label="anchor" href="#ordenar-vectores"><i class="fas fa-link"></i></a>
</h2>
<p>Una acción habitual al trabajar con datos es <strong>saber ordenarlos</strong>: de menor a mayor edad, datos más recientes vs antiguos, etc. Para ello tenemos la función <code><a href="https://rdrr.io/r/base/sort.html">sort()</a></code>, que podemos usar directamente para <strong>ordenar de menor a mayor</strong>, o con el argumento <code>decreasing = TRUE</code>, para <strong>ordenar de mayor a menor</strong>.</p>
<div class="sourceCode" id="cb214"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="op">-</span><span class="fl">3</span>, <span class="fl">0</span>, <span class="fl">10</span>, <span class="fl">5</span>, <span class="fl">2</span>, <span class="fl">7</span>, <span class="op">-</span><span class="fl">13</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/sort.html">sort</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="co"># orden de menor a mayor</span></code></pre></div>
<pre><code>## [1] -13  -3   0   1   2   5   7  10</code></pre>
<div class="sourceCode" id="cb216"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/sort.html">sort</a></span><span class="op">(</span><span class="va">x</span>, decreasing <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span> <span class="co"># orden de mayor a menor</span></code></pre></div>
<pre><code>## [1] -13  -3   0   1   2   5   7  10</code></pre>
<p>Otra forma de ordenar un vector es que <code>R</code> nos <strong>devuelva los índices de los elementos ordenados</strong>, y luego usar dichos índices para reorganizar los elementos, con la función <code><a href="https://rdrr.io/r/base/order.html">order()</a></code>.</p>
<div class="sourceCode" id="cb218"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/order.html">order</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="co"># el elemento más pequeño es el octavo, luego el segundo, luego el tercero, luego el primero, luego el sexto, etc.</span></code></pre></div>
<pre><code>## [1] 8 2 3 1 6 5 7 4</code></pre>
<div class="sourceCode" id="cb220"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">x</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/order.html">order</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="op">]</span> <span class="co"># accedemos a los índices ordenados, equivalente al sort(x)</span></code></pre></div>
<pre><code>## [1] -13  -3   0   1   2   5   7  10</code></pre>
</div>
<div id="fechas" class="section level2">
<h2>
<span class="header-section-number">3.10</span> Fechas<a class="anchor" aria-label="anchor" href="#fechas"><i class="fas fa-link"></i></a>
</h2>
<div class="rmdnote">
<ul>
<li>
<code>numeric</code>: variables de tipo numéricas (algunas veces vendrán indicados como <code>int</code> o integer para enteros, y <code>dbl</code> o <code>double</code> para números con decimales).</li>
<li>
<code>character</code>: variables de tipo caracter.</li>
<li>
<code>Date</code>: variables de tipo fecha.</li>
</ul>
</div>
<p>Hay un tipo muy especial de datos que son los <strong>datos tipo fecha</strong>. Una fecha podría ser a priori una simple cadena de texto <code>"2021-04-21"</code> pero podemos usar la función <code><a href="https://rdrr.io/r/base/as.Date.html">as.Date()</a></code> para que <code>R</code> entienda que esa cadena de texto representa un instante temporal. Fíjate la diferencia entre una fecha en texto y una fecha con <code><a href="https://rdrr.io/r/base/as.Date.html">as.Date()</a></code>.</p>
<div class="sourceCode" id="cb222"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">fecha_char</span> <span class="op">&lt;-</span> <span class="st">"2021-04-21"</span>
<span class="va">fecha_date</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html">as.Date</a></span><span class="op">(</span><span class="va">fecha_char</span>, format <span class="op">=</span> <span class="st">"%Y-%m-%d"</span><span class="op">)</span>
<span class="va">fecha_char</span> <span class="op">+</span> <span class="fl">1</span></code></pre></div>
<pre><code>## Error in fecha_char + 1: argumento no-numérico para operador binario</code></pre>
<div class="sourceCode" id="cb224"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">fecha_date</span> <span class="op">+</span> <span class="fl">1</span></code></pre></div>
<pre><code>## [1] "2021-04-22"</code></pre>
<p>En el momento en que convertimos la cadena de texto a fecha, aunque se visualice como tal, internamente es un número, por lo que podemos restar fechas (días entre ambas), <strong>podemos sumar números a fechas (fecha días después)</strong>, etc. Dentro del entorno <a href="https://tidyverse.tidyverse.org">tidyverse</a>, el paquete <a href="https://lubridate.tidyverse.org">lubridate</a> tiene implementadas <strong>múltiples funciones para poder operar con fechas de forma sencilla e intuitiva</strong>.</p>
<div class="inline-table"><table class="table table-sm">
<caption>
<span id="tab:unnamed-chunk-79">Tabla 3.2: </span>Paquetes mencionados hasta ahora</caption>
<thead><tr class="header">
<th align="left">paquetes</th>
<th align="left">descripción</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">{base}</td>
<td align="left">utilidades básicas</td>
</tr>
<tr class="even">
<td align="left">{bookdown}</td>
<td align="left">creación de libros, manuales e informes en R</td>
</tr>
<tr class="odd">
<td align="left">{glue}</td>
<td align="left">manejo de texto literal</td>
</tr>
<tr class="even">
<td align="left">{stringr}</td>
<td align="left">manejo complejo de cadenas de texto</td>
</tr>
<tr class="odd">
<td align="left">{lubridate}</td>
<td align="left">manejo de fechas</td>
</tr>
</tbody>
</table></div>
<p><a href="https://lubridate.tidyverse.org/" target="_blank"><img src="img/lubridate.png" width="100%" style="display: block; margin: auto;"></a></p>
<div class="rmdimportant">
<p><strong><span style="color: #20935E;">CONSEJO: argumentos por defecto</span></strong></p>
<p>La función <code><a href="https://rdrr.io/r/base/sort.html">sort()</a></code> es un buen ejemplo de que las <strong>funciones traen definidos argumentos por defecto</strong> (aunque no los veamos a priori). La orden <code><a href="https://rdrr.io/r/base/sort.html">sort(x)</a></code> en realidad está ejecutando <code><a href="https://rdrr.io/r/base/sort.html">sort(x, decreasing = TRUE)</a></code>, pero como es su valor por defecto, nos podemos ahorrar incluirlo. Escribe <code>? help sort()</code> en la consola y verás como en la cabecera de la función ya hay preasignado un <code>decreasing = TRUE</code>.</p>
</div>
<div class="rmdcaution">
<p><strong><span style="color: #dc3545;">Convertir tipos de datos</span></strong></p>
<p>A veces la lectura de variables numéricas de nuestros archivos puede hacer que un número, por ejemplo <code>1</code>, sea leído como la cadena de texto <code>"1"</code>, con la que no podemos operar como un número. Las funciones <code><a href="https://rdrr.io/r/base/numeric.html">as.numeric()</a></code>, <code><a href="https://rdrr.io/r/base/character.html">as.character()</a></code> y <code><a href="https://rdrr.io/r/base/logical.html">as.logical()</a></code> nos permiten convertir una variable en tipo numérico, caracter o lógico, respectivamente.</p>
<div class="sourceCode" id="cb226"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="st">"1"</span> <span class="op">+</span> <span class="fl">1</span></code></pre></div>
<pre><code>## Error in "1" + 1: argumento no-numérico para operador binario</code></pre>
<div class="sourceCode" id="cb228"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/numeric.html">as.numeric</a></span><span class="op">(</span><span class="st">"1"</span><span class="op">)</span> <span class="op">+</span> <span class="fl">1</span></code></pre></div>
<pre><code>## [1] 2</code></pre>
<div class="sourceCode" id="cb230"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/character.html">as.character</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] "1"</code></pre>
<div class="sourceCode" id="cb232"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/logical.html">as.logical</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">1</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] FALSE  TRUE</code></pre>
</div>
<div class="rmdimportant">
<p><strong><span style="color: #20935E;">CONSEJO: optimizar nuestro código</span></strong></p>
<p>Aunque parezca un tema menor, si tu código tarda 1 milisegundo más de lo que podría tardar de otra forma, si esa orden se repite muchas veces, ese milisegundo extra puede ser 5, 10 o 20 minutos más que tu código tardará en ejecutarse. Hay un paquete muy útil en <code>R</code> para medir tiempos de distintas órdenes que hacen lo mismo (el paquete <a href="https://github.com/joshuaulrich/microbenchmark/">microbenchmark</a>), vamos a instalarlo.</p>
<div class="sourceCode" id="cb234"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span><span class="op">(</span><span class="st">"microbenchmark"</span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/joshuaulrich/microbenchmark/">microbenchmark</a></span><span class="op">)</span></code></pre></div>
<p>Este paquete contiene una orden para comparar el tiempo de dos órdenes: necesita como primeros argumentos las dos órdenes cuyos tiempos vamos a comparar, y un argumento <code>times</code> en el que le indicamos el número de veces que ejecutará cada orden para realizar los tiempos medios. Vamos a comparar los comandos de ordenación <code><a href="https://rdrr.io/r/base/order.html">order()</a></code> y <code><a href="https://rdrr.io/r/base/sort.html">sort()</a></code>.</p>
<div class="sourceCode" id="cb235"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html">rnorm</a></span><span class="op">(</span><span class="fl">1e3</span><span class="op">)</span> <span class="co"># 1000 elementos aleatorias de una normal N(0, 1)</span>
<span class="fu"><a href="https://rdrr.io/pkg/microbenchmark/man/microbenchmark.html">microbenchmark</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/sort.html">sort</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span>, <span class="co"># primera forma</span>
               <span class="va">x</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/order.html">order</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="op">]</span>, <span class="co"># segunda forma</span>
               times <span class="op">=</span> <span class="fl">1e3</span><span class="op">)</span> <span class="co"># se repetirá 1000 veces</span></code></pre></div>
<pre><code>## Unit: microseconds
##         expr    min      lq     mean   median       uq      max neval cld
##      sort(x) 66.689 83.1415 173.4670 112.1195 156.9360 11478.50  1000   a
##  x[order(x)] 48.048 59.4585 128.9124  78.1910 107.0305 26256.32  1000   a</code></pre>
<p>Sí, estás viendo bien: aunque a priori parezca contraintuitivo, es más corto obtener los índices ordenados de un vector, y luego reordenarlo en base a esos índices, que la ordenación directa a través del comando <code><a href="https://rdrr.io/r/base/sort.html">sort()</a></code> (ya que usan algoritmos de ordenación distintos).</p>
</div>
<div class="inline-table"><table class="table table-sm">
<caption>
<span id="tab:unnamed-chunk-84">Tabla 3.3: </span>Paquetes mencionados hasta ahora</caption>
<thead><tr class="header">
<th align="left">paquetes</th>
<th align="left">descripción</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">{base}</td>
<td align="left">utilidades básicas</td>
</tr>
<tr class="even">
<td align="left">{bookdown}</td>
<td align="left">creación de libros, manuales e informes en R</td>
</tr>
<tr class="odd">
<td align="left">{glue}</td>
<td align="left">manejo de texto literal</td>
</tr>
<tr class="even">
<td align="left">{stringr}</td>
<td align="left">manejo complejo de cadenas de texto</td>
</tr>
<tr class="odd">
<td align="left">{lubridate}</td>
<td align="left">manejo de fechas</td>
</tr>
<tr class="even">
<td align="left">{microbenchmark}</td>
<td align="left">comparativa de tiempos de ejecución</td>
</tr>
</tbody>
</table></div>
</div>
<div id="ejercicios-1" class="section level2">
<h2>
<span class="header-section-number">3.11</span> 📝 Ejercicios<a class="anchor" aria-label="anchor" href="#ejercicios-1"><i class="fas fa-link"></i></a>
</h2>
<p>(haz click en las flechas para ver soluciones)</p>
<details><p><summary>📝<strong>Ejercicio 1</strong>: define un vector que contenga los números 1, 10, -1 y 2, y guárdalo en una variable llamada <code>vector_num</code>. Tras definirlo, calcula su suma. </summary></p>
<!-- toc -->
<ul>
<li>Solución:</li>
</ul>
<div class="sourceCode" id="cb237"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Vector de números</span>
<span class="va">vector_num</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">10</span>, <span class="op">-</span><span class="fl">1</span>, <span class="fl">2</span><span class="op">)</span>

<span class="co"># Suma</span>
<span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">vector_num</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] 12</code></pre>
<!-- tocstop -->
</details><p> </p>
<details><p><summary>📝<strong>Ejercicio 2</strong>: calcula la versión ordenada del vector anterior <code>vector_num</code>. </summary></p>
<!-- toc -->
<ul>
<li>Solución:</li>
</ul>
<div class="sourceCode" id="cb239"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Ordenamos el vector + 1 (con sort)</span>
<span class="fu"><a href="https://rdrr.io/r/base/sort.html">sort</a></span><span class="op">(</span><span class="va">vector_num</span> <span class="op">+</span> <span class="fl">1</span><span class="op">)</span></code></pre></div>
<pre><code>## [1]  0  2  3 11</code></pre>
<div class="sourceCode" id="cb241"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Ordenamos el vector + 1 (con order)</span>
<span class="va">vector_num2</span> <span class="op">&lt;-</span> <span class="va">vector_num</span> <span class="op">+</span> <span class="fl">1</span>
<span class="va">vector_num2</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/order.html">order</a></span><span class="op">(</span><span class="va">vector_num2</span><span class="op">)</span><span class="op">]</span></code></pre></div>
<pre><code>## [1]  0  2  3 11</code></pre>
<!-- tocstop -->
</details><p> </p>
<details><p><summary>📝<strong>Ejercicio 3</strong>: encuentra del vector <code>vector_num</code> original el lugar (el índice) que ocupa su mínimo y su máximo. </summary></p>
<!-- toc -->
<ul>
<li>Solución:</li>
</ul>
<div class="sourceCode" id="cb243"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">vector_num</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">10</span>, <span class="op">-</span><span class="fl">1</span>, <span class="fl">2</span><span class="op">)</span>

<span class="co"># Encontrando el lugar que ocupa el máximo y mínimo</span>
<span class="fu"><a href="https://rdrr.io/r/base/which.min.html">which.max</a></span><span class="op">(</span><span class="va">vector_num</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] 2</code></pre>
<div class="sourceCode" id="cb245"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/which.min.html">which.min</a></span><span class="op">(</span><span class="va">vector_num</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] 3</code></pre>
<div class="sourceCode" id="cb247"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Vector lógico: mayores que 1 y menores que 7</span>
<span class="va">vector_num</span> <span class="op">&gt;</span> <span class="fl">1</span> <span class="op">&amp;</span> <span class="va">vector_num</span> <span class="op">&lt;</span> <span class="fl">7</span></code></pre></div>
<pre><code>## [1] FALSE FALSE FALSE  TRUE</code></pre>
<div class="sourceCode" id="cb249"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># ¿Son todos positivos?</span>
<span class="fu"><a href="https://rdrr.io/r/base/all.html">all</a></span><span class="op">(</span><span class="va">vector_num</span> <span class="op">&gt;</span> <span class="fl">0</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] FALSE</code></pre>
<!-- tocstop -->
</details><p> </p>
<details><p><summary>📝<strong>Ejercicio 4</strong>: encuentra del vector <code>vector_num</code> los elementos mayores que 1 y menores que 7. Encuentra una forma de averiguar si todos los elementos son o no positivos. </summary></p>
<!-- toc -->
<ul>
<li>Solución:</li>
</ul>
<div class="sourceCode" id="cb251"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Vector lógico: mayores que 1 y menores que 7</span>
<span class="va">vector_num</span> <span class="op">&gt;</span> <span class="fl">1</span> <span class="op">&amp;</span> <span class="va">vector_num</span> <span class="op">&lt;</span> <span class="fl">7</span></code></pre></div>
<pre><code>## [1] FALSE FALSE FALSE  TRUE</code></pre>
<div class="sourceCode" id="cb253"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># ¿Son todos positivos?</span>
<span class="fu"><a href="https://rdrr.io/r/base/all.html">all</a></span><span class="op">(</span><span class="va">vector_num</span> <span class="op">&gt;</span> <span class="fl">0</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] FALSE</code></pre>
<!-- tocstop -->
</details><p> </p>
<details><p><summary>📝<strong>Ejercicio 5</strong>: crea un vector con las palabras “Hola”, “me”, “llamo” (y tu nombre y apellidos), y pega luego sus elementos de forma que la frase esté correctamente escrita en castellano. Tras hacerlo, añade “y tengo 30 años”. </summary></p>
<!-- toc -->
<ul>
<li>Solución:</li>
</ul>
<div class="sourceCode" id="cb255"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Definiendo el vector</span>
<span class="va">vector_char</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Hola"</span>, <span class="st">"me"</span>, <span class="st">"llamo"</span>, <span class="st">"Javier"</span>,
                 <span class="st">"Álvarez"</span>, <span class="st">"Liébana"</span><span class="op">)</span>

<span class="co"># Pegamos</span>
<span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste</a></span><span class="op">(</span><span class="va">vector_char</span>, collapse <span class="op">=</span> <span class="st">" "</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] "Hola me llamo Javier Álvarez Liébana"</code></pre>
<div class="sourceCode" id="cb257"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Añadimos frase</span>
<span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste</a></span><span class="op">(</span><span class="va">vector_char</span>, collapse <span class="op">=</span> <span class="st">" "</span><span class="op">)</span>, <span class="st">" y tengo 30 años."</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] "Hola me llamo Javier Álvarez Liébana y tengo 30 años."</code></pre>
<!-- tocstop -->
</details><p> </p>
<details><p><summary>📝<strong>Ejercicio 6</strong>: obten la fecha de hoy, define la fecha de tu cumpleaños, y calcula la diferencia de días</summary></p>
<!-- toc -->
<ul>
<li>Solución:</li>
</ul>
<div class="sourceCode" id="cb259"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Hoy</span>
<span class="va">hoy</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Sys.time.html">Sys.Date</a></span><span class="op">(</span><span class="op">)</span>

<span class="co"># Cumple (diferentes formatos)</span>
<span class="va">cumple</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html">as.Date</a></span><span class="op">(</span><span class="st">"1989-09-10"</span><span class="op">)</span>
<span class="va">cumple</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html">as.Date</a></span><span class="op">(</span><span class="st">"10-09-1989"</span>, <span class="st">"%d-%m-%Y"</span><span class="op">)</span>

<span class="co"># Diferencia</span>
<span class="va">hoy</span> <span class="op">-</span> <span class="va">cumple</span></code></pre></div>
<pre><code>## Time difference of 11724 days</code></pre>
<!-- tocstop -->
</details>
</div>
</div>
  <div class="chapter-nav">
<div class="prev"><a href="primeros-pasos.html"><span class="header-section-number">2</span> Primeros pasos</a></div>
<div class="next"><a href="proyecto.html"><span class="header-section-number">4</span> Flujo de trabajo: primer proyecto</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#vectores"><span class="header-section-number">3</span> Tipos de datos I: vectores</a></li>
<li><a class="nav-link" href="#vectores-num%C3%A9ricos"><span class="header-section-number">3.1</span> Vectores numéricos</a></li>
<li><a class="nav-link" href="#secuencias-con-un-patr%C3%B3n"><span class="header-section-number">3.2</span> Secuencias con un patrón</a></li>
<li><a class="nav-link" href="#operaciones-aritm%C3%A9ticas-con-vectores-num%C3%A9ricos"><span class="header-section-number">3.3</span> Operaciones aritméticas con vectores numéricos</a></li>
<li><a class="nav-link" href="#operaciones-estad%C3%ADsticas-con-vectores-num%C3%A9ricos"><span class="header-section-number">3.4</span> Operaciones estadísticas con vectores numéricos</a></li>
<li>
<a class="nav-link" href="#vectores-de-caracteres-texto"><span class="header-section-number">3.5</span> Vectores de caracteres (texto)</a><ul class="nav navbar-nav"><li><a class="nav-link" href="#paquete-glue"><span class="header-section-number">3.5.1</span> Paquete glue</a></li></ul>
</li>
<li><a class="nav-link" href="#vectores-l%C3%B3gicos-truefalse"><span class="header-section-number">3.6</span> Vectores lógicos (TRUE/FALSE)</a></li>
<li>
<a class="nav-link" href="#ausentes"><span class="header-section-number">3.7</span> Datos ausentes: NA y NaN</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#na-not-available"><span class="header-section-number">3.7.1</span> NA: not available</a></li>
<li><a class="nav-link" href="#nan-not-a-number"><span class="header-section-number">3.7.2</span> NaN: not a number</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#seleccionar-elementos-de-un-vector"><span class="header-section-number">3.8</span> Seleccionar elementos de un vector</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#which"><span class="header-section-number">3.8.1</span> which</a></li>
<li><a class="nav-link" href="#null"><span class="header-section-number">3.8.2</span> NULL</a></li>
</ul>
</li>
<li><a class="nav-link" href="#ordenar-vectores"><span class="header-section-number">3.9</span> Ordenar vectores</a></li>
<li><a class="nav-link" href="#fechas"><span class="header-section-number">3.10</span> Fechas</a></li>
<li><a class="nav-link" href="#ejercicios-1"><span class="header-section-number">3.11</span> 📝 Ejercicios</a></li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
<li><a id="book-source" href="https://github.com/dadosdelaplace/cursoR_intro_2021_2022/blob/master/03-tipo_datos_vectores.Rmd">View source <i class="fab fa-github"></i></a></li>
          <li><a id="book-edit" href="https://github.com/dadosdelaplace/cursoR_intro_2021_2022/edit/master/03-tipo_datos_vectores.Rmd">Edit this page <i class="fab fa-github"></i></a></li>
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>Aprendiendo R sin morir en el intento</strong>" was written by Javier Álvarez Liébana. It was last built on Última actualización: 16-10-2021.</p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer><!-- dynamically load mathjax for compatibility with self-contained --><script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script><script type="text/x-mathjax-config">const popovers = document.querySelectorAll('a.footnote-ref[data-toggle="popover"]');
for (let popover of popovers) {
  const div = document.createElement('div');
  div.setAttribute('style', 'position: absolute; top: 0, left:0; width:0, height:0, overflow: hidden; visibility: hidden;');
  div.innerHTML = popover.getAttribute('data-content');

  var has_math = div.querySelector("span.math");
  if (has_math) {
    document.body.appendChild(div);
    MathJax.Hub.Queue(["Typeset", MathJax.Hub, div]);
    MathJax.Hub.Queue(function() {
      popover.setAttribute('data-content', div.innerHTML);
      document.body.removeChild(div);
    })
  }
}
</script>
</body>
</html>
