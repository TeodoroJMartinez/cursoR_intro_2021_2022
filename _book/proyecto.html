<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Capítulo 4 Flujo de trabajo: primer proyecto | Aprendiendo R sin morir en el intento</title>
<meta name="author" content="Javier Álvarez Liébana">
<meta name="description" content="Tabla 4.1: Paquetes mencionados hasta ahora paquetes descripción {base} utilidades básicas {bookdown} creación de libros, manuales e informes en R {glue} manejo de texto literal {stringr} manejo...">
<meta name="generator" content="bookdown 0.24 with bs4_book()">
<meta property="og:title" content="Capítulo 4 Flujo de trabajo: primer proyecto | Aprendiendo R sin morir en el intento">
<meta property="og:type" content="book">
<meta property="og:image" content="/img/logo_R.png">
<meta property="og:description" content="Tabla 4.1: Paquetes mencionados hasta ahora paquetes descripción {base} utilidades básicas {bookdown} creación de libros, manuales e informes en R {glue} manejo de texto literal {stringr} manejo...">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Capítulo 4 Flujo de trabajo: primer proyecto | Aprendiendo R sin morir en el intento">
<meta name="twitter:description" content="Tabla 4.1: Paquetes mencionados hasta ahora paquetes descripción {base} utilidades básicas {bookdown} creación de libros, manuales e informes en R {glue} manejo de texto literal {stringr} manejo...">
<meta name="twitter:image" content="/img/logo_R.png">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><link href="libs/_Sen-0.4.0/font.css" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=DM%20Mono&amp;display=swap" rel="stylesheet">
<link href="libs/_Bitter-0.4.0/font.css" rel="stylesheet">
<script src="libs/bs3compat-0.3.0/transition.js"></script><script src="libs/bs3compat-0.3.0/tabs.js"></script><script src="libs/bs3compat-0.3.0/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- CSS -->
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">Aprendiendo R sin morir en el intento</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html">Prefacio</a></li>
<li class="book-part">Toma de contacto</li>
<li><a class="" href="instalacionR.html"><span class="header-section-number">1</span> Instalación</a></li>
<li><a class="" href="primeros-pasos.html"><span class="header-section-number">2</span> Primeros pasos</a></li>
<li class="book-part">Conceptos básicos</li>
<li><a class="" href="vectores.html"><span class="header-section-number">3</span> Tipos de datos I: vectores</a></li>
<li><a class="active" href="proyecto.html"><span class="header-section-number">4</span> Flujo de trabajo: primer proyecto</a></li>
<li><a class="" href="control.html"><span class="header-section-number">5</span> Estructuras de control</a></li>
<li><a class="" href="datos.html"><span class="header-section-number">6</span> Tipos de datos II: datos estructurados</a></li>
<li><a class="" href="importar-exportar.html"><span class="header-section-number">7</span> Importando/exportando</a></li>
<li class="book-part">Listas y funciones</li>
<li><a class="" href="otros-datos.html"><span class="header-section-number">8</span> Listas y factores</a></li>
<li><a class="" href="funciones.html"><span class="header-section-number">9</span> Creación de funciones</a></li>
<li class="book-part">Alto en el camino</li>
<li><a class="" href="resumen-1.html"><span class="header-section-number">10</span> ¿Qué sabemos hacer?</a></li>
<li class="book-part">DATAVIZ: introducción a la visualización</li>
<li><a class="" href="procesamiento.html"><span class="header-section-number">11</span> Tidy data: ordenando datos</a></li>
<li><a class="" href="tidyverse.html"><span class="header-section-number">12</span> Transformando los datos: incursión al universo tidyverse</a></li>
<li><a class="" href="modelos_lineales.html"><span class="header-section-number">13</span> Introducción a los modelos lineales</a></li>
<li><a class="" href="ggplot2.html"><span class="header-section-number">14</span> Visualizando datos: incursión a ggplot2</a></li>
<li class="book-part">Epílogo</li>
<li><a class="" href="contribuye.html"><span class="header-section-number">15</span> Contribuye al proyecto</a></li>
<li><a class="" href="bibliograf%C3%ADa.html">Bibliografía</a></li>
</ul>

        <div class="book-extra">
          <p><a id="book-repo" href="https://github.com/dadosdelaplace/cursoR_intro_2021_2022">View book source <i class="fab fa-github"></i></a></p>
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="proyecto" class="section level1">
<h1>
<span class="header-section-number">Capítulo 4</span> Flujo de trabajo: primer proyecto<a class="anchor" aria-label="anchor" href="#proyecto"><i class="fas fa-link"></i></a>
</h1>
<div class="inline-table"><table class="table table-sm">
<caption>
<span id="tab:unnamed-chunk-91">Tabla 4.1: </span>Paquetes mencionados hasta ahora</caption>
<thead><tr class="header">
<th align="left">paquetes</th>
<th align="left">descripción</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">{base}</td>
<td align="left">utilidades básicas</td>
</tr>
<tr class="even">
<td align="left">{bookdown}</td>
<td align="left">creación de libros, manuales e informes en R</td>
</tr>
<tr class="odd">
<td align="left">{glue}</td>
<td align="left">manejo de texto literal</td>
</tr>
<tr class="even">
<td align="left">{stringr}</td>
<td align="left">manejo complejo de cadenas de texto</td>
</tr>
<tr class="odd">
<td align="left">{lubridate}</td>
<td align="left">manejo de fechas</td>
</tr>
<tr class="even">
<td align="left">{microbenchmark}</td>
<td align="left">comparativa de tiempos de ejecución</td>
</tr>
</tbody>
</table></div>
<div class="rmdimportant">
<p><strong><span style="color: #20935E;">CONSEJO: cambiar la notación exponencial</span></strong></p>
<p>Por defecto, <code>R</code> muestra los números en formato de notación exponencial. Por ejemplo, el número <code>1000000</code> nos lo mostrará por defecto como <code>1e+06</code>. A veces podemos querer que se muestre con todas sus cifras (por ejemplo, en el título o leyenda de una gráfica): para anular la notación exponencial, escribe al inicio del código <code><a href="https://rdrr.io/r/base/options.html">options("scipen" = 10)</a></code>.</p>
</div>
<div class="rmdimportant">
<p><strong><span style="color: #20935E;">CONSEJO: limpiar consola</span></strong></p>
<p>Podemos limpiar la consola clickando en al escoba que tenemos en la parte superior derecha de la misma. Esta acción <strong>no nos elimina ninguna variable</strong>, simplemente nos limpia la consola de mensajes.</p>
</div>
<p>Estamos listos/as para crear nuestro <strong>primer proyecto de <code>R</code></strong> :)</p>
<p>Cuando se empieza a programar para un trabajo concreto de <code>R</code> es recomendable crearnos lo que se conoce como un <strong>proyecto de <code>R</code></strong>: en lugar de ir abriendo ventanas sueltas para programar (los scripts, los archivos con extensión <code>.R</code>), podemos <strong>agruparlos</strong> en distintos proyectos, de forma que podamos acceder a ellos de forma ordenada (algo así como crear carpetas en nuestro disco duro).</p>
<div id="crear-proyecto" class="section level2">
<h2>
<span class="header-section-number">4.1</span> Crear proyecto<a class="anchor" aria-label="anchor" href="#crear-proyecto"><i class="fas fa-link"></i></a>
</h2>
<p>Para crear nuestro proyecto deberemos de ir al menú superior <code>File &lt;&lt; New Project</code> (ver <a href="proyecto.html#fig:crear-proyecto1">4.1</a>)</p>
<div class="figure" style="text-align: center">
<span style="display:block;" id="fig:crear-proyecto1"></span>
<img src="img/crear_proyecto1.jpg" alt="Crear un nuevo proyecto en R." width="50%"><p class="caption">
Imagen/gráfica 4.1: Crear un nuevo proyecto en R.
</p>
</div>
<p>Se nos abrirá una ventana con 3 opciones:</p>
<ul>
<li><p><strong>New directory</strong>: crear un proyecto desde el inicio (<strong>opción recomendable</strong>).</p></li>
<li><p><strong>Existing directory</strong>: crear un proyecto con los códigos que tienes ya guardados en una carpeta.</p></li>
<li><p><strong>Version control</strong>: para importar el proyecto de algún repositorio y vincularlo a él.</p></li>
</ul>
<div class="figure" style="text-align: center">
<span style="display:block;" id="fig:crear-proyecto2"></span>
<img src="img/crear_proyecto2.jpg" alt="Opciones de creación." width="50%"><p class="caption">
Imagen/gráfica 4.2: Opciones de creación.
</p>
</div>
<div class="figure" style="text-align: center">
<span style="display:block;" id="fig:crear-proyecto3"></span>
<img src="img/crear_proyecto3.jpg" alt="Clickar en «New project»." width="50%"><p class="caption">
Imagen/gráfica 4.3: Clickar en «New project».
</p>
</div>
<p>Deberemos elegir el <strong>directorio de nuestro ordenador</strong> donde queremos que se guarde (una carpeta que contendrá todos los códigos y datos de ese proyecto), así como el <strong>nombre del proyecto</strong> (que será a su vez el nombre de la subcarpeta que se os creará en el ordenador).</p>
<div class="figure" style="text-align: center">
<span style="display:block;" id="fig:crear-proyecto4"></span>
<img src="img/crear_proyecto4.jpg" alt="Nombre del proyecto." width="50%"><p class="caption">
Imagen/gráfica 4.4: Nombre del proyecto.
</p>
</div>
<p>Una vez que el proyecto está creado, abriremos nuestro primer <strong>script de <code>R</code></strong> (donde escribiremos el código), escribiremos una descripción del proyecto en la primera línea y guardaremos el archivo (archivo de extensión <code>.R</code>).</p>
<div class="figure" style="text-align: center">
<span style="display:block;" id="fig:crear-proyecto5"></span>
<img src="img/crear_proyecto5.jpg" alt="Abrir nuestro primer script de R." width="50%"><p class="caption">
Imagen/gráfica 4.5: Abrir nuestro primer script de R.
</p>
</div>
<div class="figure" style="text-align: center">
<span style="display:block;" id="fig:crear-proyecto6"></span>
<img src="img/crear_proyecto6.jpg" alt="Descripción al inicio del código." width="50%"><p class="caption">
Imagen/gráfica 4.6: Descripción al inicio del código.
</p>
</div>
<div class="figure" style="text-align: center">
<span style="display:block;" id="fig:crear-proyecto7"></span>
<img src="img/crear_proyecto7.jpg" alt="Guardamos el código." width="50%"><p class="caption">
Imagen/gráfica 4.7: Guardamos el código.
</p>
</div>
<div class="figure" style="text-align: center">
<span style="display:block;" id="fig:crear-proyecto8"></span>
<img src="img/crear_proyecto8.jpg" alt="Guardamos el código." width="50%"><p class="caption">
Imagen/gráfica 4.8: Guardamos el código.
</p>
</div>
<p>Este será nuestro <strong>código principal</strong> (puedes ponerle el nombre que quieras, normalmente se le llama <code>main.R</code> para diferenciarlo del resto), desde el que iremos construyendo nuestro código e iremos llamando a otros archivos si es necesario. Recuerda que <strong>programar es como escribir</strong>: cuanto más limpio y estructurado, mejor se entenderá.</p>
<p> </p>
<p>La <strong>ventaja de tener los códigos agrupados por proyectos</strong> es que si estamos trabajando en varios a la vez podemos saltar de uno a otro, visualizando solo los códigos de un proyecto, y no los 100 archivos <code>sin_titulo131.R</code> que vayamos creando.</p>
<div class="figure" style="text-align: center">
<span style="display:block;" id="fig:crear-proyecto9"></span>
<img src="img/crear_proyecto9.jpg" alt="Saltar de proyecto en proyecto." width="50%"><p class="caption">
Imagen/gráfica 4.9: Saltar de proyecto en proyecto.
</p>
</div>
</div>
<div id="directorios-de-trabajo-y-cabecera" class="section level2">
<h2>
<span class="header-section-number">4.2</span> Directorios de trabajo y cabecera<a class="anchor" aria-label="anchor" href="#directorios-de-trabajo-y-cabecera"><i class="fas fa-link"></i></a>
</h2>
<p>Como luego veremos en la Sección <a href="datos.html#datos">6</a>, es altamente recomendable que <strong>todos los archivos (códigos, datos, imágenes, recursos, etc)</strong> los tengamos dentro de la misma carpeta del proyecto (aunque podamos crear subdirectorios), para que trabajar en el proyecto sea más sencillo e intuitivo. Vamos a crearnos dentro de la carpeta del proyecto, una subcarpeta que se llame <code>DATOS</code>, en donde <strong>debemos descargar todos los ficheros que hay en <a href="https://github.com/dadosdelaplace/cursoR_intro/tree/main/DATOS" class="uri">https://github.com/dadosdelaplace/cursoR_intro/tree/main/DATOS</a></strong>, y otra llamada <code>CODIGOS</code>, donde guardar nuestros archivos <code>.R</code> (por eso de ser ordenadicos.)</p>
<div class="figure" style="text-align: center">
<span style="display:block;" id="fig:carpeta-codigos"></span>
<img src="img/carpeta_codigos.jpg" alt="Subcarpeta «CODIGOS»." width="50%"><p class="caption">
Imagen/gráfica 4.10: Subcarpeta «CODIGOS».
</p>
</div>
<p>En esa carpeta de códigos vamos a crear de prueba el código llamado <code>variables.R</code> donde vamos a <strong>definir algunas variables</strong> que luego usaremos en el código principal (suele suceder con variables que van a ser fijas como nombres, fechas o codificaciones de variables).</p>
<div class="sourceCode" id="cb259"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Descripción: script de prueba con variables</span>

<span class="co"># Variables</span>
<span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">0</span>, <span class="op">-</span><span class="fl">1</span>, <span class="fl">71</span><span class="op">)</span> <span class="co"># Vector de números</span>
<span class="va">y</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"hola"</span>, <span class="st">"me"</span>, <span class="st">"llamo"</span>, <span class="st">"Javier"</span><span class="op">)</span> <span class="co"># Vector de caracteres</span>
<span class="va">apellido</span> <span class="op">&lt;-</span> <span class="st">"Álvarez"</span>

<span class="co"># Fechas</span>
<span class="va">hoy</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html">as.Date</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Sys.time.html">Sys.time</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="co"># Convertir a tipo fecha la fecha de hoy</span>
<span class="va">fecha_origen</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html">as.Date</a></span><span class="op">(</span><span class="st">"2021-01-01"</span><span class="op">)</span> <span class="co"># Inicio de año</span></code></pre></div>
<div class="figure" style="text-align: center">
<span style="display:block;" id="fig:carpeta-codigos2"></span>
<img src="img/carpeta_codigos2.jpg" alt="Escribimos una serie de variables fijas para luego ser usadas." width="50%"><p class="caption">
Imagen/gráfica 4.11: Escribimos una serie de variables fijas para luego ser usadas.
</p>
</div>
<p>No es obligatorio pero es <strong>altamente recomendable</strong> tener muy estructurado nuestros códigos, de forma que el archivo <code>.R</code> haga una <strong>tarea concreta y definida</strong> (uno carga archivos, otro preprocesa, otro hace un modelo, otro hace las gráficas), y sea el <strong>código principal el que haga una llamada limpia a todos ellos</strong>, para que en caso de error, la detección del mismo sea más sencilla.</p>
<p>Así que eso haremos: desde nuestro archivo principal <code>main.R</code> llamaremos a ese archivo <code>variables.R</code>, para luego usar las variables definidas en él.</p>
<p><strong>¿Cómo indicarle a <code>R</code> donde está nuestro fichero?</strong></p>
<p>En <code>R</code>, como en todo lenguaje de programación, podemos consultar lo que el ordenador llama <em>directorio de trabajo</em>: la carpeta «base» desde donde está ejecutando tu código. Dicha ruta de directorio se puede consultar con la función <code><a href="https://rdrr.io/r/base/getwd.html">getwd()</a></code>, pudiendo ver los archivos y carpetas que hay dentro del mismo con el comando <code><a href="https://rdrr.io/r/base/list.files.html">dir()</a></code></p>
<div class="sourceCode" id="cb260"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/getwd.html">getwd</a></span><span class="op">(</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/list.files.html">dir</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<div class="figure" style="text-align: center">
<span style="display:block;" id="fig:getwd"></span>
<img src="img/getwd.jpg" alt="Consultar directorio de trabajo predeterminado y archivos contenidos en él." width="50%"><p class="caption">
Imagen/gráfica 4.12: Consultar directorio de trabajo predeterminado y archivos contenidos en él.
</p>
</div>
<p>Lo ideal es empezar el código <strong>fijando como directorio de trabajo el directorio donde tengamos nuestro archivo principal</strong> <code>main.R</code> y para ello usaremos la función <code><a href="https://rdrr.io/r/base/getwd.html">setwd()</a></code>, cuyo argumento será la ruta donde queremos fijarlo. Para hacerlo de forma automática (y que el código pueda ser abierto por ti pero también por otros que no tengan tu misma estructura de carpetas), obtendremos de forma automática la ruta del archivo <code>main.R</code> o del proyecto con la orden <code>rstudioapi::getSourceEditorContext()$path</code>, y después usaremos <code><a href="https://rdrr.io/r/base/basename.html">dirname()</a></code> para quedarnos solo con la ruta de carpetas (eliminando el nombre del fichero al final). Esa será la ruta que le pasaremos a <code><a href="https://rdrr.io/r/base/getwd.html">setwd()</a></code>, quedando nuestro directorio de trabajo automáticamente fijado, sin preocuparnos de la ruta</p>
<div class="sourceCode" id="cb261"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Fijamos directorio de trabajo automáticamente</span>
<span class="fu"><a href="https://rdrr.io/r/base/getwd.html">setwd</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/basename.html">dirname</a></span><span class="op">(</span><span class="fu">rstudioapi</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/rstudioapi/man/rstudio-editors.html">getSourceEditorContext</a></span><span class="op">(</span><span class="op">)</span><span class="op">$</span><span class="va">path</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<div class="figure" style="text-align: center">
<span style="display:block;" id="fig:setwd"></span>
<img src="img/setwd.jpg" alt="Fijamos de forma automático el directorio de trabajo." width="50%"><p class="caption">
Imagen/gráfica 4.13: Fijamos de forma automático el directorio de trabajo.
</p>
</div>
<p>Una vez que hemos fijado nuestro directorio, para cargar código <code>.R</code>, basta que usemos la función <code><a href="https://rdrr.io/r/base/source.html">source()</a></code>, cuyo argumento será la ruta del archivo. Como tenemos de directorio base el directorio en el que tenemos nuestro archivo principal (<code>./</code>), bastará que empecemos a escribir <code><a href="https://rdrr.io/r/base/source.html">source("./")</a></code>, presionar el tabulador, y se nos abrirá el menú de archivos de nuestro directorio de trabajo, pudiendo ir seleccionando de forma sencilla la ruta de nuestro archivo.</p>
<div class="sourceCode" id="cb262"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Cargamos fichero variable.R</span>
<span class="kw"><a href="https://rdrr.io/r/base/source.html">source</a></span><span class="op">(</span><span class="st">"./CODIGOS/variables.R"</span><span class="op">)</span></code></pre></div>
<div class="figure" style="text-align: center">
<span style="display:block;" id="fig:menu-carpetas"></span>
<img src="img/menu_carpetas.jpg" alt="Cargar archivos de nuestro directorio de trabajo." width="50%"><p class="caption">
Imagen/gráfica 4.14: Cargar archivos de nuestro directorio de trabajo.
</p>
</div>
<div class="figure" style="text-align: center">
<span style="display:block;" id="fig:menu-carpetas1"></span>
<img src="img/menu_carpetas1.jpg" alt="Cargar archivos de nuestro directorio de trabajo." width="50%"><p class="caption">
Imagen/gráfica 4.15: Cargar archivos de nuestro directorio de trabajo.
</p>
</div>
</div>
<div id="ejecución" class="section level2">
<h2>
<span class="header-section-number">4.3</span> Ejecución<a class="anchor" aria-label="anchor" href="#ejecuci%C3%B3n"><i class="fas fa-link"></i></a>
</h2>
<p>Ese archivo que hemos incluido en el código principal nos <strong>cargará las variables que hemos definido en él</strong>, pudiendo usarlas en el código. Vamos a ejecutar lo que tenemos de momento, y para ello tenemos 2 opciones: o copiar el código del script en la consola y pulsar <em>ENTER</em>, o bien, activando la casilla <em>source on save</em> y guardando el script (no solo se guardará sino que se ejecutará).</p>
<div class="figure" style="text-align: center">
<span style="display:block;" id="fig:source-on-save"></span>
<img src="img/source_on_save.jpg" alt="Guardamos con la casilla «source on save» activada para que además de guardar se ejecute el código." width="50%"><p class="caption">
Imagen/gráfica 4.16: Guardamos con la casilla «source on save» activada para que además de guardar se ejecute el código.
</p>
</div>
<p>Como vemos en la imagen <a href="proyecto.html#fig:source-on-save">4.16</a>, una vez ejecutado, tenemos en nuestro panel de entorno (parte superior derecha) las variables ya cargadas que teníamos definidas en nuestro fichero <code>variables.R</code>.</p>
<p>Prueba a escribir algunas funciones que hemos aprendido con dichas variables y vuelve a hacer click en «guardar» con <em>source on save</em> activado.</p>
<div class="sourceCode" id="cb263"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Sumamos 3 a cada elemento de x</span>
<span class="va">z</span> <span class="op">&lt;-</span> <span class="va">x</span> <span class="op">+</span> <span class="fl">3</span>
<span class="va">z</span></code></pre></div>
<pre><code>## [1]  4  5  3  2 74</code></pre>
<div class="sourceCode" id="cb265"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Imprimimos por pantalla la frase unida, y a dicha frase</span>
<span class="co"># le pegamos nuestro apellido</span>
<span class="fu"><a href="https://rdrr.io/r/base/cat.html">cat</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste</a></span><span class="op">(</span><span class="va">y</span>, collapse <span class="op">=</span> <span class="st">" "</span><span class="op">)</span>, <span class="va">apellido</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<pre><code>## hola me llamo Javier Álvarez</code></pre>
<div class="sourceCode" id="cb267"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Días que han pasado desde el inicio de año</span>
<span class="va">dias</span> <span class="op">&lt;-</span> <span class="va">hoy</span> <span class="op">-</span> <span class="va">fecha_origen</span>
<span class="va">dias</span></code></pre></div>
<pre><code>## Time difference of 283 days</code></pre>
<p>La función <code><a href="https://rdrr.io/r/base/cat.html">cat()</a></code> nos muestra por consola el texto que le pasemos de argumento (<strong>función especial para mensajes de alerta</strong> por consola)</p>
<div class="figure" style="text-align: center">
<span style="display:block;" id="fig:codigo-1"></span>
<img src="img/codigo_1.jpg" alt="Cálculos con la variables definidas: suma, concatenación de texto y diferencia de fechas." width="50%"><p class="caption">
Imagen/gráfica 4.17: Cálculos con la variables definidas: suma, concatenación de texto y diferencia de fechas.
</p>
</div>
<p>Ya hemos ejecutado nuestro primer proyecto en <code>.R</code> :)</p>
<div class="rmdimportant">
<p><strong><span style="color: #20935E;">CONSEJO: comentarios en los códigos</span></strong></p>
<p>Es crucial que intentes <strong>documentar al máximo tu código</strong> y que te acostumbres a ello desde el principio, dejando explícito que haces en cada paso, tanto para ti como para otra persona que pueda leer tu código y lo entienda. Para ello usaremos <code># comentario</code> cuando queramos dejar comentarios en el código. Dichas partes, amén de estar en otro color, no son leídas por <code>R</code> ni ejecutadas: son comentarios que el programa «no ve», solo son para nosotros.</p>
</div>
<div class="rmdwarning">
<p><strong><span style="color: #ffc107;">Guardar los scripts</span></strong></p>
<p>Los scripts que tengas sin guardar tendrán un asterisco <code><a href="https://rdrr.io/r/base/Arithmetic.html">*</a></code> al final del nombre en la pestaña superior de la ventana.</p>
</div>
<div class="rmdimportant">
<p><strong><span style="color: #20935E;">CONSEJO: extraer fecha y hora de hoy</span></strong></p>
<p>La función <code><a href="https://rdrr.io/r/base/Sys.time.html">Sys.time()</a></code> accede al sistema de nuestro ordenador para decirnos la <strong>fecha y hora del momento de la ejecución</strong> de dicha función.</p>
<div class="sourceCode" id="cb269"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/Sys.time.html">Sys.time</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] "2021-10-11 13:22:46 CEST"</code></pre>
</div>

</div>
</div>
  <div class="chapter-nav">
<div class="prev"><a href="vectores.html"><span class="header-section-number">3</span> Tipos de datos I: vectores</a></div>
<div class="next"><a href="control.html"><span class="header-section-number">5</span> Estructuras de control</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#proyecto"><span class="header-section-number">4</span> Flujo de trabajo: primer proyecto</a></li>
<li><a class="nav-link" href="#crear-proyecto"><span class="header-section-number">4.1</span> Crear proyecto</a></li>
<li><a class="nav-link" href="#directorios-de-trabajo-y-cabecera"><span class="header-section-number">4.2</span> Directorios de trabajo y cabecera</a></li>
<li><a class="nav-link" href="#ejecuci%C3%B3n"><span class="header-section-number">4.3</span> Ejecución</a></li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
<li><a id="book-source" href="https://github.com/dadosdelaplace/cursoR_intro_2021_2022/blob/master/04-primer_projecto.Rmd">View source <i class="fab fa-github"></i></a></li>
          <li><a id="book-edit" href="https://github.com/dadosdelaplace/cursoR_intro_2021_2022/edit/master/04-primer_projecto.Rmd">Edit this page <i class="fab fa-github"></i></a></li>
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>Aprendiendo R sin morir en el intento</strong>" was written by Javier Álvarez Liébana. It was last built on Última actualización: 11-10-2021.</p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer><!-- dynamically load mathjax for compatibility with self-contained --><script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script><script type="text/x-mathjax-config">const popovers = document.querySelectorAll('a.footnote-ref[data-toggle="popover"]');
for (let popover of popovers) {
  const div = document.createElement('div');
  div.setAttribute('style', 'position: absolute; top: 0, left:0; width:0, height:0, overflow: hidden; visibility: hidden;');
  div.innerHTML = popover.getAttribute('data-content');

  var has_math = div.querySelector("span.math");
  if (has_math) {
    document.body.appendChild(div);
    MathJax.Hub.Queue(["Typeset", MathJax.Hub, div]);
    MathJax.Hub.Queue(function() {
      popover.setAttribute('data-content', div.innerHTML);
      document.body.removeChild(div);
    })
  }
}
</script>
</body>
</html>
